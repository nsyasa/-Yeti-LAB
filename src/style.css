/* Main CSS Entry Point */

/* Tailwind v4 Setup */
@import 'tailwindcss';

@theme {
    /* Brand Colors */
    --color-primary-50: #f0fdfa;
    --color-primary-100: #ccfbf1;
    --color-primary-200: #99f6e4;
    --color-primary-300: #5eead4;
    --color-primary-400: #2dd4bf;
    --color-primary-500: #00979c;
    --color-primary-600: #0d9488;
    --color-primary-700: #0f766e;
    --color-primary-800: #115e59;
    --color-primary-900: #134e4a;
    --color-primary-950: #042f2e;

    /* Theme Semantic Aliases */
    --color-theme: var(--color-primary-500);
    --color-theme-light: var(--color-primary-50);

    /* Typography */
    --font-sans: 'Outfit', 'Nunito', sans-serif;
}

/* Explicit Sources */
@source "../auth.html";
@source "../index.html";
@source "../profile.html";
@source "../teacher.html";
@source "../admin.html";
@source "../student-dashboard.html";
@source "../src/**/*.js";
@source "../modules/**/*.js";

@layer base {
    /* HTML'in kendisine de renk veriyoruz ki overscroll'da beyazlık çıkmasın */
    html {
        background-color: var(--lab-bg-dark, #0f172a);
        height: 100%;
        overflow-y: scroll;
        scrollbar-gutter: stable;
    }

    /* 100vh yerine 100dvh kullanıyoruz (Mobil Adres Çubuğu Fixi) */
    body {
        @apply font-sans transition-colors duration-300;
        background-color: var(--lab-bg-dark, #0f172a);
        color: var(--text-secondary, #cbd5e1);
        min-height: 100dvh;
        display: flex;
        flex-direction: column;
        overflow-x: hidden;
    }

    body.dark-mode,
    html.dark body {
        background-color: var(--lab-bg-dark, #0f172a);
        color: var(--text-secondary, #cbd5e1);
    }

    /* Global Heading Stilleri */
    h1,
    h2,
    h3,
    h4 {
        @apply text-white;
    }
}

/* Kartlar ve Görsel Efektler */
.course-card {
    @apply relative overflow-hidden transition-all duration-300 border border-white/10 rounded-2xl bg-white/5;
    min-height: 240px;
}

.dark .course-card {
    background: rgba(30, 41, 59, 0.6);
    backdrop-filter: blur(10px);
}

/* Dark mode for course card icon container (emoji circle) */
.dark .course-card .rounded-full {
    background-color: rgb(30, 41, 59) !important;
    /* slate-800 */
    border-color: rgb(51, 65, 85) !important;
    /* slate-700 */
}

/* Dark mode for course card text */
.dark .course-card h3 {
    color: rgb(243, 244, 246) !important;
    /* gray-100 */
}

.dark .course-card p {
    color: rgb(156, 163, 175) !important;
    /* gray-400 */
}

/* Navbar Sabitleme */
#main-header {
    @apply sticky top-0 z-50 transition-all duration-300;
    background: rgba(15, 23, 42, 0.95);
    backdrop-filter: blur(12px);
    border-bottom: 1px solid rgba(255, 255, 255, 0.05);
}

/* Alt Menü (Sticky Footer Fix) */
main {
    flex: 1 0 auto;
    /* İçerik kısaysa bile uzamasını sağlar */
    width: 100%;
}

/* Sidebar Fix - Transform tabanlı göster/gizle */
#lesson-sidebar {
    @apply fixed top-0 left-0 h-full w-80 bg-white dark:bg-gray-800 shadow-2xl border-r border-gray-200 dark:border-gray-700 flex flex-col pb-10;
    z-index: 60;
    /* Navbar'ın (z-50) üzerinde olmalı */
    transform: translateX(-100%);
    /* Varsayılan olarak GİZLİ */
    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

#lesson-sidebar.open {
    transform: translateX(0);
    /* Sadece .open sınıfı varken görünür */
}

/* Overlay (Arka plan karartma) */
.sidebar-overlay {
    @apply fixed inset-0 bg-black/50 backdrop-blur-sm opacity-0 pointer-events-none transition-opacity duration-300;
    z-index: 55;
    /* Sidebar'ın hemen altında, Navbar'ın üstünde */
}

.sidebar-overlay.open {
    @apply opacity-100 pointer-events-auto;
}

/* ============================================
   PRELOAD HACK: Sidebar Flash Prevention
   Sayfa yüklenirken animasyonları durdurur
   ============================================ */
body.preload * {
    transition: none !important;
    -webkit-transition: none !important;
}

/* Başlangıçta sidebar'ı kesinlikle gizle (Flash'ı önler) */
body.preload #lesson-sidebar {
    visibility: hidden !important;
    transform: translateX(-100%) !important;
}

body.preload .sidebar-overlay {
    visibility: hidden !important;
    opacity: 0 !important;
}
