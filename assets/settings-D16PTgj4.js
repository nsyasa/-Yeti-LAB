const f={config:{onUpdate:null,getCourseData:()=>null,getCourseKey:()=>"arduino"},defaultIcons:{arduino:"ðŸ”Œ",microbit:"ðŸŽ®",scratch:"ðŸ±",mblock:"ðŸ¤–",appinventor:"ðŸ“±"},init(e){this.config={...this.config,...e}},load(){const e=this.config.getCourseData();if(!e)return;const t=this.config.getCourseKey(),s=e.icon||this.defaultIcons[t]||"ðŸ“š",i=e.title||t,n=e.description||"",c=document.getElementById(EL.ADMIN.COURSE.ICON),o=document.getElementById(EL.ADMIN.COURSE.TITLE),a=document.getElementById(EL.ADMIN.COURSE.DESC);c&&(c.value=s),o&&(o.value=i),a&&(a.value=n),this.updatePreview(s,i,n)},update(){const e=this.config.getCourseData();if(!e)return;const t=document.getElementById(EL.ADMIN.COURSE.ICON),s=document.getElementById(EL.ADMIN.COURSE.TITLE),i=document.getElementById(EL.ADMIN.COURSE.DESC),n=t?t.value:"",c=s?s.value:"",o=i?i.value:"";e.icon=n,e.title=c,e.description=o,this.updatePreview(n,c,o),this.config.onUpdate&&this.config.onUpdate()},toggle(){const e=document.getElementById(EL.ADMIN.COURSE.FORM),t=document.getElementById(EL.ADMIN.COURSE.TOGGLE);!e||!t||(e.classList.contains("hidden")?(e.classList.remove("hidden"),t.textContent="â–²",t.style.transform="rotate(180deg)"):(e.classList.add("hidden"),t.textContent="â–¼",t.style.transform="rotate(0deg)"))},updatePreview(e,t,s){const i=document.getElementById(EL.ADMIN.COURSE.PREVIEW_ICON),n=document.getElementById(EL.ADMIN.COURSE.PREVIEW_TITLE),c=document.getElementById(EL.ADMIN.COURSE.PREVIEW_DESC),o=this.config.getCourseKey();i&&(i.textContent=e||"ðŸ“š"),n&&(n.textContent=t||o),c&&(c.textContent=s||"AÃ§Ä±klama yok")},renderTabEditor(){const e=document.getElementById("tab-names-editor");if(!e)return;const t=this.config.getCourseKey(),s=this.config.getCourseData(),i=window.TabConfig?.courses?.default?.tabs||[],n=window.TabConfig?.courses?.[t]?.tabs||i,c=s?.customTabNames||{};e.innerHTML="",n.forEach((o,a)=>{const l=c[o.id]||o.label,u=String(o.id??"").replace(/[^a-z0-9_-]/gi,"_"),d=Utils.escapeHtml(String(l??"")),m=Utils.escapeHtml(String(o.label??"")),g=JSON.stringify(String(o.id??"")),r=document.createElement("div");r.className="flex items-center gap-1",r.innerHTML=`
                <input 
                    type="text" 
                    id="tab-name-${u}"
                    value="${d}"
                    placeholder="${m}"
                    class="flex-1 border rounded px-2 py-1 text-sm"
                    oninput="CourseSettings.updateTabName(${g}, this.value)"
                />
            `,e.appendChild(r)})},updateTabName(e,t){const s=this.config.getCourseData();s&&(s.customTabNames||(s.customTabNames={}),s.customTabNames[e]=t,this.applyCustomTabNames(),this.config.onUpdate&&this.config.onUpdate())},resetTabNames(){const e=this.config.getCourseData();e&&confirm("Sekme isimlerini varsayÄ±lana dÃ¶ndÃ¼rmek istiyor musunuz?")&&(e.customTabNames={},this.renderTabEditor(),this.applyCustomTabNames(),this.config.onUpdate&&this.config.onUpdate())},applyCustomTabNames(){const e=this.config.getCourseData();if(!e)return;const t=e.customTabNames||{},s={mission:["lbl-mission","lbl-chk-mission"],materials:["lbl-materials","lbl-chk-materials"],circuit:["lbl-circuit","lbl-chk-circuit"],code:["lbl-code","lbl-chk-code"],quiz:["lbl-quiz","lbl-chk-quiz"],challenge:["lbl-challenge","lbl-chk-challenge"],tip:["lbl-tip","lbl-chk-tip"]},i={mission:"ðŸŽ¯ AmaÃ§",materials:"ðŸ§© DonanÄ±m",circuit:"âš¡ SimÃ¼lasyon",code:"ðŸ’» Kod",quiz:"ðŸ“ Test",challenge:"ðŸ† GÃ¶rev",tip:"ðŸ’¡ Ä°pucu"};Object.keys(s).forEach(n=>{s[n].forEach(o=>{const a=document.getElementById(o);if(a)if(t[n]){const l=i[n]?.split(" ")[0]||"";!t[n].includes(l)&&l?a.textContent=`${l} ${t[n]}`:a.textContent=t[n]}else i[n]&&(a.textContent=i[n])})})}};window.CourseSettings=f;
