const r={config:{storageKey:"mucit_atolyesi_autosave",debounceMs:2e3,statusElementId:"autosave-status",getData:()=>null,setData:t=>{}},autoSaveTimer:null,init(t){this.config={...this.config,...t}},triggerAutoSave(){this.updateStatus("ðŸ“ Taslak GÃ¼ncellendi","orange"),this.autoSaveTimer&&clearTimeout(this.autoSaveTimer),this.autoSaveTimer=setTimeout(()=>this.saveToLocal(),this.config.debounceMs)},saveToLocal(){try{const t=this.config.getData();if(!t)return console.warn("StorageManager: No data to save"),!1;const e={timestamp:new Date().getTime(),data:t};localStorage.setItem(this.config.storageKey,JSON.stringify(e));const a=new Date().toLocaleTimeString();return this.updateStatus(`ðŸ“‹ Yerel Taslak: ${a}`,"gray"),!0}catch(t){return console.error("StorageManager: AutoSave Error:",t),t.name==="QuotaExceededError"||t.code===22?this.updateStatus("Depolama dolu! Eski verileri temizleyin.","red"):this.updateStatus("Otomatik kayÄ±t hatasÄ±!","red"),!1}},restoreFromLocal(){try{const t=localStorage.getItem(this.config.storageKey);if(!t)return!1;const e=JSON.parse(t);if(e.data&&Object.keys(e.data).length>0){this.config.setData(e.data);const a=new Date(e.timestamp).toLocaleString();return setTimeout(()=>{this.updateStatus(`YÃ¼klendi: ${a}`,"blue")},500),!0}return!1}catch(t){return console.error("StorageManager: Restore Error:",t),!1}},clear(){try{return localStorage.removeItem(this.config.storageKey),this.updateStatus("","gray"),!0}catch(t){return console.error("StorageManager: Clear Error:",t),!1}},hasSavedData(){try{return localStorage.getItem(this.config.storageKey)!==null}catch{return!1}},getStorageInfo(){try{const t=localStorage.getItem(this.config.storageKey);if(!t)return null;const e=JSON.parse(t);return{timestamp:new Date(e.timestamp),sizeBytes:t.length,sizeKB:Math.round(t.length/1024)}}catch{return null}},updateStatus(t,e){const a=document.getElementById(this.config.statusElementId);a&&(a.textContent=t,a.classList.remove("text-green-400","text-red-400","text-blue-400","text-yellow-400","text-orange-400","text-gray-400"),e&&a.classList.add(`text-${e}-400`))}};window.StorageManager=r;
