const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./NotificationDropdown-CJw1YDo0.js","./router-IanoY4pe.js","./router-nk19jXMv.css","./analyticsService-DZVX51D5.js","./courseEnrollmentService-DjD8RC3o.js","./CoursesSection-sj6wZA6R.js","./AnalyticsSection-v04UR6B2.js","./StudentCoursesSection-DIH26QLe.js"])))=>i.map(i=>d[i]);
import"./router-IanoY4pe.js";window.YetiLab=window.YetiLab||{};window.YetiLab.courseData=window.YetiLab.courseData||{};window.courseData=window.YetiLab.courseData;window.ArduinoCity=window.YetiLab;const base=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));window.ArduinoCity=window.ArduinoCity||{};window.ArduinoCity.tipsData={LED:{title:"LED Kullanƒ±mƒ±",text:"LED'lerin uzun bacaƒüƒ± (+) Anot, kƒ±sa bacaƒüƒ± (-) Katottur. Ters baƒülarsan √ßalƒ±≈ümaz! Ayrƒ±ca patlamamasƒ± i√ßin her zaman diren√ß kullanmalƒ±sƒ±n.",icon:"üí°"},Buton:{title:"Buton Sinyalleri",text:"Butonlarƒ±n kararlƒ± √ßalƒ±≈ümasƒ± i√ßin 'Pull-down' veya 'Pull-up' direnci gerekir. Yoksa havadaki statik elektrikten etkilenip rastgele deƒüerler okuyabilir.",icon:"üîò"},Potansiyometre:{title:"Analog Okuma",text:"Potansiyometreler 0 ile 1023 arasƒ±nda deƒüer √ºretir. Ancak LED parlaklƒ±ƒüƒ± 0-255 arasƒ±dƒ±r. Bu y√ºzden deƒüeri 4'e b√∂lmeyi unutma!",icon:"üéõÔ∏è"},Servo:{title:"Servo Motor Limiti",text:"Servo motoru elinle zorla d√∂nd√ºrmeye √ßalƒ±≈üma, di≈ülileri kƒ±rƒ±labilir. Ayrƒ±ca 0 ve 180 derece sƒ±nƒ±rlarƒ±nƒ± kodla zorlama, motor ƒ±sƒ±nabilir.",icon:"ü¶æ"},Ultrasonik:{title:"Yankƒ± Bekleme",text:"Ultrasonik sens√∂r sert ve d√ºz y√ºzeylerde en iyi sonucu verir. Kuma≈ü gibi yumu≈üak y√ºzeyler sesi yutar ve yanlƒ±≈ü √∂l√ß√ºm yapabilir.",icon:"ü¶á"},LDR:{title:"I≈üƒ±k Hassasiyeti",text:"LDR'nin √ºzerine doƒürudan g√º√ßl√º ƒ±≈üƒ±k tutarsan direnci √ßok d√º≈üer. Ortam ƒ±≈üƒ±ƒüƒ±nƒ± ayarlamak i√ßin kalibrasyon yapman gerekebilir.",icon:"‚òÄÔ∏è"},DHT11:{title:"Zamanlama √ñnemli",text:"DHT11 sens√∂r√ºnden saniyede en fazla 1 kere okuma yapmalƒ±sƒ±n. Daha sƒ±k okursan hatalƒ± sonu√ßlar alabilirsin.",icon:"üå°Ô∏è"},Buzzer:{title:"Aktif vs Pasif",text:"Aktif buzzer'a sadece elektrik verince √∂ter. Pasif buzzer (bizim kullandƒ±ƒüƒ±mƒ±z) ise nota √ßalmak i√ßin kodla frekans verilmesini ister.",icon:"üîä"},D√∂ng√º:{title:"Sonsuz D√∂ng√º",text:"Arduino'da `void loop()` zaten sonsuz bir d√∂ng√ºd√ºr. ƒ∞√ßine `while(true)` yazmana gerek yoktur.",icon:"üîÑ"},Deƒüi≈üken:{title:"T√ºrk√ße Karakter",text:"Deƒüi≈üken isimlendirirken T√ºrk√ße karakter (≈ü, ƒ∞, ƒü, √∂, √ß) ve bo≈üluk kullanmamalƒ±sƒ±n. √ñrn: `isikSeviyesi` doƒüru, `ƒ±≈üƒ±k seviyesi` yanlƒ±≈ütƒ±r.",icon:"üìù"},General:[{title:"√ñnce Algoritma",text:"Kod yazmaya ba≈ülamadan √∂nce ne yapacaƒüƒ±nƒ± adƒ±m adƒ±m kaƒüƒ±da yazmak (Algoritma), i≈üini √ßok kolayla≈ütƒ±rƒ±r.",icon:"üß†"},{title:"Noktalƒ± Virg√ºl",text:"C++ dilinde (Arduino) her komut satƒ±rƒ±nƒ±n sonuna noktalƒ± virg√ºl (;) koymayƒ± unutma! Hatalarƒ±n %90'ƒ± bundan kaynaklanƒ±r.",icon:";)"},{title:"Kablolarƒ± Kontrol Et",text:"Kodun doƒüru ama √ßalƒ±≈ümƒ±yor mu? Genelde su√ßlu koddur ama bazen de temassƒ±zlƒ±k yapan bir kablodur. Kablolarƒ±nƒ± kontrol et!",icon:"üîå"},{title:"Yorum Satƒ±rlarƒ±",text:"Kodlarƒ±na `//` ile notlar al. Bir hafta sonra kendi koduna baktƒ±ƒüƒ±nda ne yaptƒ±ƒüƒ±nƒ± hatƒ±rlamanƒ± saƒülar.",icon:"üí¨"}]};window.tipsData=window.ArduinoCity.tipsData;window.YetiLab=window.YetiLab||{};window.YetiLab.quizData={0:[{q:"Arduino Uno kartƒ±nƒ±n 'beyni' olan mikrodenetleyici hangisidir?",options:["Intel i7","ATmega328P","Snapdragon 888","Arduino Core"],answer:1},{q:"Kod y√ºklemek i√ßin hangi portu kullanƒ±rƒ±z?",options:["G√º√ß Giri≈üi","HDMI Portu","USB Portu","Kulaklƒ±k Giri≈üi"],answer:2},{q:"Reset butonu ne i≈üe yarar?",options:["Kartƒ± kapatƒ±r","Kodu siler","Kodu ba≈ütan ba≈ülatƒ±r","Bilgisayarƒ± kapatƒ±r"],answer:2}],1:[{q:"Arduino IDE nedir?",options:["Bir oyun motorudur","Kod yazma ve y√ºkleme programƒ±dƒ±r","3D √ßizim programƒ±dƒ±r","Vir√ºs temizleme programƒ±dƒ±r"],answer:1},{q:"Yazdƒ±ƒüƒ±mƒ±z kodda hata olup olmadƒ±ƒüƒ±nƒ± kontrol etmek i√ßin hangi butona basarƒ±z?",options:["Kontrol Et (Tik ƒ∞≈üareti)","Y√ºkle (Ok ƒ∞≈üareti)","Yeni Dosya","Kaydet"],answer:0},{q:"Arduino'dan gelen mesajlarƒ± okuduƒüumuz pencerenin adƒ± nedir?",options:["Mesaj Kutusu","Seri Port Ekranƒ±","Terminal","Chat Ekranƒ±"],answer:1}],2:[{q:"Dijital d√ºnyada 'HIGH' komutu ne anlama gelir?",options:["0 Volt (Kapalƒ±)","2.5 Volt (Yarƒ±m)","5 Volt (A√ßƒ±k)","100 Volt (Tehlikeli)"],answer:2},{q:"1 saniye beklemek i√ßin hangi komut kullanƒ±lƒ±r?",options:["wait(1)","sleep(1000)","delay(1000)","stop(1)"],answer:2},{q:"LED'in uzun bacaƒüƒ± hangisidir?",options:["Anot (+)","Katot (-)","N√∂tr","Toprak"],answer:0}]};window.quizData=window.YetiLab.quizData;window.ArduinoCity=window.ArduinoCity||{};window.ArduinoCity.quizData=window.YetiLab.quizData;const quiz=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),Settings$1={defaults:{theme:"light",lastCourse:null},get:e=>{const t=localStorage.getItem(e);return t!==null?t:Settings$1.defaults[e]},set:(e,t)=>{try{localStorage.setItem(e,t)}catch{console.warn("Settings could not be saved (localStorage disabled?)")}},clear:()=>{localStorage.clear()}};window.Settings=Settings$1;const I18n$1={get lang(){return window.Settings?.get("language")||"tr"},translations:{tr:{loading:"Y√ºkleniyor...",error_loading:"Veri Y√ºklenemedi",back:"Geri D√∂n",start:"Ba≈üla ‚Üí",completed:"‚úÖ Tamamlandƒ±",percent_completed:"%{rate} Tamamlandƒ±",course_selection_title:"Hangi Maceraya Atƒ±lmak ƒ∞stersin? üöÄ",course_selection_desc:"ƒ∞lgi alanƒ±na uygun eƒüitim setini se√ß ve hemen √∂ƒürenmeye ba≈üla.",no_content:"Bu ders i√ßin hen√ºz i√ßerik eklenmemi≈ü.",intro:"Ba≈ülangƒ±√ß",episode:"B√∂l√ºm",simulation_badge:"Sim√ºlasyonlu",tab_mission:"üéØ Ama√ß",tab_materials:"Devre Elemanlarƒ±",tab_circuit:"üîå Devre",tab_code:"üíª Kod",tab_challenge:"üèÜ G√∂rev",tab_quiz:"üìù Test",tab_blocks:"Blok Kodlarƒ±",tab_design:"Tasarƒ±m",header_mission:"Ama√ß",header_circuit:"Baƒülantƒ± ≈ûemasƒ±",header_challenge:"Meydan Okuma",header_quiz:"Kendini Test Et",btn_complete:"üèÜ Dersi Tamamla",btn_copy_code:"Kodu Kopyala",msg_copied:"Kopyalandƒ±",msg_progress_saved:"Dersi tamamladƒ±ƒüƒ±nƒ±zda ilerleme kaydedilir.",quiz_correct:"üéâ Doƒüru Cevap! Harikasƒ±n.",quiz_wrong:"üòî Yanlƒ±≈ü Cevap. Doƒüru cevap i≈üaretlendi.",sim_lab:"Sanal Laboratuvar",sim_live:"CANLI",sim_explore:"ƒ∞nteraktif Ke≈üif",sim_learn:"√ñƒûREN",sim_discover:"KE≈ûFET",sim_interactive_img:"Etkile≈üimli G√∂rsel",info_title:"Bilgi",exp_hover_msg:"Par√ßalarƒ±n √ºzerine gelerek ne i≈üe yaradƒ±klarƒ±nƒ± √∂ƒüren.",exp_hotspot_msg:"Numaralƒ± noktalarƒ±n √ºzerine gelerek a√ßƒ±klamalarƒ± g√∂r√ºn.",img_not_found:"üì∑ Resim bulunamadƒ±.",zoom_in:"üîç B√ºy√ºt"},en:{loading:"Loading...",error_loading:"Data Could Not Be Loaded",back:"Go Back",start:"Start ‚Üí",completed:"‚úÖ Completed",percent_completed:"%{rate} Completed",course_selection_title:"Which Adventure Do You Want? üöÄ",course_selection_desc:"Choose the training set that suits your interest and start learning immediately.",no_content:"No content added for this course yet.",intro:"Intro",episode:"Episode",simulation_badge:"Simulation",tab_mission:"üéØ Mission",tab_materials:"Components",tab_circuit:"üîå Circuit",tab_code:"üíª Code",tab_challenge:"üèÜ Challenge",tab_quiz:"üìù Quiz",tab_blocks:"Block Codes",tab_design:"Design",header_mission:"Mission",header_circuit:"Wiring Diagram",header_challenge:"Challenge",header_quiz:"Test Yourself",btn_complete:"üèÜ Complete Lesson",btn_copy_code:"Copy Code",msg_copied:"Copied",msg_progress_saved:"Progress is saved when you complete the lesson.",quiz_correct:"üéâ Correct Answer! Awesome.",quiz_wrong:"üòî Wrong Answer. Correct answer highlighted.",sim_lab:"Virtual Lab",sim_live:"LIVE",sim_explore:"Interactive Explorer",sim_learn:"LEARN",sim_discover:"DISCOVER",sim_interactive_img:"Interactive Image",info_title:"Info",exp_hover_msg:"Hover over parts to learn what they do.",exp_hotspot_msg:"Hover over numbered spots to see descriptions.",img_not_found:"üì∑ Image not found.",zoom_in:"üîç Zoom In"}},t:(e,t={})=>{const r=I18n$1.lang;let i=I18n$1.translations[r][e]||I18n$1.translations.tr[e]||e;return Object.keys(t).forEach(o=>{i=i.replace(`%{${o}}`,t[o])}),i},toggle:()=>{const t=I18n$1.lang==="tr"?"en":"tr";window.Settings?window.Settings.set("language",t):localStorage.setItem("settings_language",t),window.location.reload()}};window.I18n=I18n$1;const TabConfig={courses:{microbit:{tabs:[{id:"mission",label:"Ama√ß üéØ"},{id:"materials",label:"Donanƒ±m üß©"},{id:"circuit",label:"Bloklar üß±"},{id:"code",label:"Kod üíæ"},{id:"challenge",label:"G√∂rev üöÄ"},{id:"tip",label:"ƒ∞pucu üí°"},{id:"quiz",label:"Test üìù"}],headers:{materials:"Gerekli Donanƒ±m",circuit:"Blok Diyagramƒ±",code:"MakeCode / Python"}},scratch:{tabs:[{id:"mission",label:"üéØ Ama√ß"},{id:"materials",label:"üé≠ Kuklalar"},{id:"circuit",label:"üß© Bloklar"},{id:"code",label:"üíª Kod"},{id:"challenge",label:"üèÜ G√∂rev"},{id:"tip",label:"üí° ƒ∞pucu"},{id:"quiz",label:"üìù Test"}],headers:{materials:"Kuklalar",circuit:"Blok Dizilimi"}},mblock:{tabs:[{id:"mission",label:"Ama√ß üéØ"},{id:"materials",label:"Aygƒ±t & Uzantƒ± üîå"},{id:"circuit",label:"Bloklar üß©"},{id:"code",label:"Kodlar üíª"},{id:"challenge",label:"G√∂revler üèÜ"},{id:"tip",label:"ƒ∞pucu üí°"},{id:"quiz",label:"Test üìù"}],headers:{materials:"Aygƒ±tlar ve Uzantƒ±lar",circuit:"Blok Yapƒ±sƒ±"}},appinventor:{tabs:[{id:"mission",label:"Ama√ß üéØ"},{id:"design",label:"Tasarƒ±m üé®"},{id:"blocks",label:"Bloklar üß©"},{id:"challenge",label:"G√∂rev üèÜ"},{id:"tip",label:"ƒ∞pucu üí°"},{id:"quiz",label:"Test üìù"}],headers:{materials:"Gerekli Malzemeler",circuit:"Aray√ºz Tasarƒ±mƒ±"},mapping:{design:"circuit",blocks:"code"}},default:{tabs:[{id:"mission",label:"üéØ Ama√ß"},{id:"materials",label:"üß© Devre Elemanlarƒ±"},{id:"circuit",label:"‚ö° Devre"},{id:"code",label:"üíª Kod"},{id:"challenge",label:"üèÜ G√∂rev"},{id:"tip",label:"üí° ƒ∞pucu"},{id:"quiz",label:"üìù Test"}],headers:{materials:"Devre Elemanlarƒ±",circuit:"Baƒülantƒ± ≈ûemasƒ±",code:"Proje Kodu"}}},getConfig:e=>TabConfig.courses[e]||TabConfig.courses.default};window.TabConfig=TabConfig;const tabs=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),StateProxy={create:()=>{const e={currentCourseKey:null,componentInfo:{},phases:[],projects:[]};return new Proxy(e,{get(t,r){if(typeof Store<"u"&&Store.getCurrentCourseKey)switch(r){case"currentCourseKey":return Store.getCurrentCourseKey();case"phases":return Store.getPhases();case"projects":return Store.getProjects();case"componentInfo":return Store.getComponentInfo()}return t[r]},set(t,r,i){if(t[r]=i,typeof Store<"u"&&Store.setCurrentCourseKey)switch(r){case"currentCourseKey":Store.setCurrentCourseKey(i);break;case"phases":Store.setState({phases:i});break;case"projects":Store.setState({projects:i});break;case"componentInfo":Store.setState({componentInfo:i});break}return!0}})}};window.StateProxy=StateProxy;const Cache={store:new Map,stats:{hits:0,misses:0,sets:0},DEFAULT_TTL:5*60*1e3,SHORT_TTL:1*60*1e3,LONG_TTL:30*60*1e3,get(e){const t=this.store.get(e);return t?Date.now()>t.expiry?(this.store.delete(e),null):(this.stats.hits++,t.value):null},has(e){return this.get(e)!==null},set(e,t,r=this.DEFAULT_TTL){this.store.set(e,{value:t,expiry:Date.now()+r}),this.stats.sets++},clear(e=null){e?this.store.delete(e):(this.store.clear(),this.resetStats())},invalidate(e){let t=0;for(const r of this.store.keys())r.startsWith(e)&&(this.store.delete(r),t++);return t},async getOrFetch(e,t,r=this.DEFAULT_TTL){const i=this.get(e);if(i!==null)return console.log(`[Cache] HIT: ${e}`),i;console.log(`[Cache] MISS: ${e}`),this.stats.misses++;try{const o=await t();return this.set(e,o,r),o}catch(o){throw o}},getStats(){const e=this.stats.hits+this.stats.misses;return{...this.stats,hitRate:e===0?"0%":Math.round(this.stats.hits/e*100)+"%"}},resetStats(){this.stats={hits:0,misses:0,sets:0}},keys(){return Array.from(this.store.keys())},cleanup(){let e=0;const t=Date.now();for(const[r,i]of this.store.entries())t>i.expiry&&(this.store.delete(r),e++);return e}};typeof window<"u"&&(window.Cache=Cache);const Metrics$1={data:{apiCalls:0,cacheHits:0,cacheMisses:0,errors:0,loadTimes:[]},increment(e){this.data[e]!==void 0&&this.data[e]++},recordLoadTime(e,t){this.data.loadTimes.push({name:e,duration:t,timestamp:Date.now()}),this.data.loadTimes.length>50&&this.data.loadTimes.shift()},startTimer(e){return{name:e,start:performance.now()}},endTimer(e){const t=performance.now()-e.start;return this.recordLoadTime(e.name,t),t},getSummary(){const e=this.data.loadTimes.length>0?this.data.loadTimes.reduce((t,r)=>t+r.duration,0)/this.data.loadTimes.length:0;return{apiCalls:this.data.apiCalls,cacheHitRate:this.data.cacheHits/(this.data.cacheHits+this.data.cacheMisses)*100||0,errors:this.data.errors,avgLoadTime:Math.round(e)+"ms"}},logSummary(){console.table(this.getSummary())}};typeof window<"u"&&(window.Metrics=Metrics$1);const API={defaults:{maxRetries:3,retryDelay:1e3,retryBackoff:2,timeout:3e4},ERROR_LOG_KEY:"yeti_error_logs",MAX_ERROR_LOGS:50,isOnline:navigator.onLine,logError(e,t="Unknown"){const r={id:Date.now().toString(36)+Math.random().toString(36).substr(2,5),timestamp:new Date().toISOString(),context:t,message:e?.message||"Unknown error",code:e?.code||null,status:e?.status||null,hint:e?.hint||null,details:e?.details||null,stack:e?.stack?.split(`
`).slice(0,4).join(`
`)||null,userAgent:navigator.userAgent?.substr(0,100),url:window.location.href,online:navigator.onLine};return console.error(`[API Error] ${t}:`,r),this._saveErrorLog(r),r},_saveErrorLog(e){try{if(typeof localStorage>"u")return;const t=JSON.parse(localStorage.getItem(this.ERROR_LOG_KEY)||"[]");for(t.push(e);t.length>this.MAX_ERROR_LOGS;)t.shift();localStorage.setItem(this.ERROR_LOG_KEY,JSON.stringify(t))}catch(t){console.warn("[API] Could not save error log:",t.message)}},getErrorLogs(){try{return typeof localStorage>"u"?[]:JSON.parse(localStorage.getItem(this.ERROR_LOG_KEY)||"[]")}catch{return[]}},clearErrorLogs(){try{typeof localStorage<"u"&&localStorage.removeItem(this.ERROR_LOG_KEY)}catch{}},getErrorSummary(){const e=this.getErrorLogs(),t={};return e.forEach(r=>{t[r.context]=(t[r.context]||0)+1}),{totalErrors:e.length,byContext:t,lastError:e[e.length-1]||null,oldestError:e[0]||null}},init(){window.addEventListener("online",()=>{this.isOnline=!0,Toast?.success("ƒ∞nternet baƒülantƒ±sƒ± saƒülandƒ±!")}),window.addEventListener("offline",()=>{this.isOnline=!1,Toast?.warning("ƒ∞nternet baƒülantƒ±sƒ± kesildi!")})},async withRetry(e,t={}){const{maxRetries:r=this.defaults.maxRetries,retryDelay:i=this.defaults.retryDelay,retryBackoff:o=this.defaults.retryBackoff,onRetry:a=null,context:n="Veri y√ºkleme"}=t;typeof Metrics<"u"&&Metrics.increment("apiCalls");const s=typeof Metrics<"u"?Metrics.startTimer("apiCall"):null;let d=null,c=i;for(let g=1;g<=r;g++)try{if(!this.isOnline)throw new Error("NetworkError: No internet connection");const m=await e();if(m?.error)throw m.error;return s&&Metrics.endTimer(s),m}catch(m){if(d=m,console.warn(`[API] Attempt ${g}/${r} failed:`,m.message),this.isNonRetryableError(m)||g===r)throw typeof Metrics<"u"&&Metrics.increment("errors"),m;a&&a(g,m),await this.sleep(c),c*=o}throw typeof Metrics<"u"&&Metrics.increment("errors"),d},isNonRetryableError(e){const t=["JWT expired","Invalid login credentials","Email not confirmed","permission denied","foreign key constraint","duplicate key value","401","403","404","422"],r=e?.message?.toLowerCase()||"",i=e?.code?.toString()||"",o=e?.status?.toString()||"";return t.some(a=>r.includes(a.toLowerCase())||i.includes(a)||o.includes(a))},sleep(e){return new Promise(t=>setTimeout(t,e))},async fetch(e,t={}){const{timeout:r=this.defaults.timeout,maxRetries:i=this.defaults.maxRetries,...o}=t,a=async()=>{const n=new AbortController,s=setTimeout(()=>n.abort(),r);try{const d=await fetch(e,{...o,signal:n.signal});if(clearTimeout(s),!d.ok)throw new Error(`HTTP ${d.status}: ${d.statusText}`);return d}catch(d){throw clearTimeout(s),d.name==="AbortError"?new Error("Request timeout"):d}};return this.withRetry(a,{maxRetries:i})},async query(e,t="Veri y√ºkleme",r={}){const{showToast:i=!0,showLoading:o=!1,loadingMessage:a="Y√ºkleniyor...",maxRetries:n=this.defaults.maxRetries}=r;let s=null;const d=typeof Metrics<"u"?Metrics.startTimer("apiCall"):null;typeof Metrics<"u"&&Metrics.increment("apiCalls");try{o&&window.Toast&&(s=Toast.loading(a));const c=await this.withRetry(e,{maxRetries:n,onRetry:()=>{}});return s&&Toast.dismiss(s),d&&Metrics.endTimer(d),c}catch(c){if(s&&Toast.dismiss(s),this.logError(c,t),typeof Metrics<"u"&&Metrics.increment("errors"),i&&window.Toast){const g=()=>this.query(e,t,r);Toast.apiError(c,t,g)}throw c}},async checkConnection(){try{if(!window.SupabaseClient?.getClient)return!1;const{error:e}=await SupabaseClient.getClient().from("courses").select("id").limit(1);return!e}catch{return!1}},async monitorConnection(){const e=await this.checkConnection();return!e&&window.Toast&&Toast.warning("Veritabanƒ± baƒülantƒ±sƒ± kurulamadƒ±. Bazƒ± √∂zellikler √ßalƒ±≈ümayabilir."),e}};typeof window<"u"&&(window.API=API,API.init());const Services$1={toast:{success:e=>window.Toast?.success(e)??console.log("‚úì",e),error:e=>window.Toast?.error(e)??console.error("‚úó",e),warning:e=>window.Toast?.warning(e)??console.warn("‚ö†",e),info:e=>window.Toast?.info(e)??console.info("‚Ñπ",e)},i18n:{t:(e,t)=>window.I18n?.t(e,t)??e,getCurrentLang:()=>window.I18n?.currentLang??"tr"},router:{navigate:e=>window.Router?.navigate(e),redirectTo:e=>window.Router?.redirectTo(e),getCurrentRoute:()=>window.Router?.parseHash()??null},store:{getState:e=>window.Store?.getState(e),setState:(e,t)=>window.Store?.setState(e,t),subscribe:(e,t)=>window.Store?.subscribe(e,t)},theme:{getCurrent:()=>window.ThemeManager?.getCurrent()??"light",toggle:()=>window.ThemeManager?.toggle(),set:e=>window.ThemeManager?.set(e)},isAvailable:e=>({toast:()=>typeof window.Toast<"u",i18n:()=>typeof window.I18n<"u",router:()=>typeof window.Router<"u",store:()=>typeof window.Store<"u",theme:()=>typeof window.ThemeManager<"u"})[e]?.()??!1};window.Services=Services$1;typeof module<"u"&&module.exports&&(module.exports=Services$1);const AuthUI={init:async()=>{if(typeof Auth>"u"){console.log("[AuthUI] Auth module not loaded, showing login button"),AuthUI.updateUserUI(null);return}try{await Auth.init();const e=window.location.pathname.includes("profile.html"),t=parseInt(sessionStorage.getItem("profile_redirect_count")||"0"),r=3;if(Auth.needsProfileCompletion()&&!e&&t<r){console.log(`[AuthUI] Profile incomplete, redirecting to profile.html (attempt ${t+1}/${r})`),sessionStorage.setItem("profile_redirect_count",String(t+1)),window.Router?Router.redirectTo("profile.html"):window.location.href="profile.html";return}Auth.needsProfileCompletion()||sessionStorage.removeItem("profile_redirect_count"),t>=r&&Auth.needsProfileCompletion()&&(console.error("[AuthUI] Max profile redirects reached, possible loop detected."),window.Toast&&Toast.error("Profil y√ºklenirken bir sorun olu≈ütu. L√ºtfen sayfayƒ± yenileyin.")),window.Progress&&window.Progress.init&&await window.Progress.init(),AuthUI.updateUserUI(Auth.getUserInfo()),Auth.onAuthStateChange(async(i,o,a)=>{if(AuthUI.updateUserUI(Auth.getUserInfo()),i==="SIGNED_IN"){const n=window.location.pathname.includes("profile.html"),s=parseInt(sessionStorage.getItem("profile_redirect_count")||"0");Auth.needsProfileCompletion()&&!n&&s<r?(sessionStorage.setItem("profile_redirect_count",String(s+1)),window.Router?Router.redirectTo("profile.html"):window.location.href="profile.html"):Auth.needsProfileCompletion()||(sessionStorage.removeItem("profile_redirect_count"),window.Progress&&window.Progress.loadFromServer&&await window.Progress.loadFromServer())}})}catch(e){console.warn("[AuthUI] Auth init error:",e),window.Toast&&Toast.apiError(e,"Kimlik doƒürulama"),AuthUI.updateUserUI(null)}},updateUserUI:e=>{if(window.Navbar&&window.Navbar.updateAuthUI){window.Navbar.updateAuthUI();return}const t=document.getElementById("login-btn"),r=document.getElementById("user-menu"),i=document.getElementById("user-name"),o=document.getElementById("user-avatar"),a=document.getElementById("teacher-link");if(!(!t||!r))if(e&&e.isLoggedIn){if(t.classList.add("hidden"),t.classList.remove("md:flex"),r.classList.remove("hidden"),i&&(i.textContent=e.displayName||"Kullanƒ±cƒ±"),o)if(e.avatarUrl){const n=/^[\p{Emoji}\u200d]+$/u.test(e.avatarUrl)||e.avatarUrl.length<=4;if((e.avatarUrl.startsWith("http")||e.avatarUrl.startsWith("/")||e.avatarUrl.includes("."))&&!n){o.innerHTML="";const d=document.createElement("img");d.src=e.avatarUrl,d.className="w-8 h-8 rounded-full object-cover",d.alt="",d.onerror=()=>{o.textContent="üë§"},o.appendChild(d)}else o.textContent=e.avatarUrl}else o.textContent=e.isStudent?"üéì":"üë®‚Äçüè´";a&&(e.isTeacher||e.isAdmin?(a.classList.remove("hidden"),a.classList.add("flex")):a.classList.add("hidden"))}else t.classList.remove("hidden"),t.classList.add("md:flex"),r.classList.add("hidden")},toggleUserMenu:()=>{const e=document.getElementById("user-dropdown");e&&(e.classList.toggle("hidden"),e.classList.contains("hidden")||setTimeout(()=>{document.addEventListener("click",AuthUI.closeUserMenu,{once:!0})},10))},closeUserMenu:e=>{const t=document.getElementById("user-dropdown"),r=document.getElementById("user-menu");t&&r&&!r.contains(e.target)&&t.classList.add("hidden")},logout:async()=>{if(typeof Auth>"u"){window.Router?Router.redirectTo("auth.html"):window.location.href="auth.html";return}try{await Auth.signOut()}catch(e){console.warn("[AuthUI] Server logout warning (continuing local cleanup):",e)}try{Auth.studentLogout&&Auth.studentLogout(),AuthUI.updateUserUI(null),window.location.reload()}catch(e){console.error("[AuthUI] Local cleanup error:",e),window.location.href="auth.html"}}};typeof window<"u"&&(window.AuthUI=AuthUI);const CourseLoader$1={loadedCourses:new Set,manifest:{arduino:{title:"Arduino Ser√ºveni",description:"20 Haftalƒ±k Arduino robotik eƒüitimi",icon:"ü§ñ",color:"#00979C",file:"data/arduino.js"},microbit:{title:"Micro:bit D√ºnyasƒ±",description:"BBC Micro:bit ile kodlama",icon:"üíª",color:"#6C63FF",file:"data/microbit.js"},scratch:{title:"Scratch ile Oyun Yapƒ±mƒ±",description:"Blok tabanlƒ± programlama",icon:"üéÆ",color:"#FF6F00",file:"data/scratch.js"},mblock:{title:"mBlock ile Robotik",description:"mBlock tabanlƒ± Arduino programlama",icon:"ü¶æ",color:"#30B0C7",file:"data/mblock.js"},appinventor:{title:"App Inventor",description:"Android uygulama geli≈ütirme",icon:"üì±",color:"#7CB342",file:"data/appinventor.js"},"minecraft-edu":{title:"Minecraft Education",description:"Minecraft Education ƒ∞le Kodlamayƒ± Ke≈üfedin",icon:"‚õèÔ∏è",color:"#4CAF50",file:"data/minecraft-edu.js"}},async init(){if(typeof SupabaseClient<"u"&&!SupabaseClient.client&&SupabaseClient.init(),typeof SupabaseClient>"u"||!SupabaseClient.client){console.warn("[CourseLoader] SupabaseClient not available, using static manifest");return}try{console.log("[CourseLoader] Fetching courses from Supabase...");const{data:e,error:t}=await SupabaseClient.client.from("courses").select("*, projects(count)").order("position",{ascending:!0,nullsFirst:!1});if(t)throw t;if(console.log("[CourseLoader] Courses loaded:",e?.length||0),e&&e.length>0){const r={};e.forEach(i=>{const o=this.manifest[i.slug],a=i.projects&&i.projects[0]&&i.projects[0].count?i.projects[0].count:o?.projectCount||10;r[i.slug]={title:i.title,description:i.description,file:o?o.file:`data/${i.slug}.js`,icon:i.meta?.icon||(o?o.icon:"üìö"),color:i.meta?.color||(o?o.color:"gray"),isDynamic:!0,position:i.position!==void 0?i.position:999,projectCount:a}}),this.manifest=r}}catch(e){if(e.name==="AbortError"||e.message?.includes("aborted")){console.warn("[CourseLoader] Request aborted (network issue), using static manifest");return}console.error("[CourseLoader] Failed to fetch course list:",{message:e.message||e,details:e.toString(),hint:e.hint||"",code:e.code||""})}},getManifest:()=>CourseLoader$1.manifest,isLoaded:e=>CourseLoader$1.loadedCourses.has(e),loadCourse:(e,t=0)=>new Promise(async(o,a)=>{if(CourseLoader$1.isLoaded(e)){o(window.courseData[e]);return}if(window.Performance&&window.Performance.mark("load_course_"+e),typeof SupabaseClient<"u"&&SupabaseClient.client)try{const d=e,c=5e3,g=new Promise((h,u)=>{setTimeout(()=>u(new Error("Supabase load timeout (5s)")),c)}),m=(async()=>{const h=await SupabaseClient.getCourseBySlug(d);if(h){const u=await SupabaseClient.getFullCourseData(h.id);if(u)return SupabaseClient.convertToLegacyFormat(u)}return null})(),f=await Promise.race([m,g]);if(f){window.courseData[e]=f,CourseLoader$1.loadedCourses.add(e),window.Performance&&window.Performance.measure("Load Course (Supabase): "+e,"load_course_"+e),o(f);return}}catch(d){console.warn(`[CourseLoader] Supabase load failed for ${e} (${d.message}), falling back to local file.`)}const n=CourseLoader$1.manifest[e];if(!n){a(new Error(`Course not found: ${e}`));return}const s=document.createElement("script");s.src=n.file,s.async=!0,s.onload=async()=>{CourseLoader$1.loadedCourses.add(e),window.courseData[e]||(window.courseData[e]={title:n.title,description:n.description,icon:n.icon,data:{projects:[],componentInfo:{},phases:[]}});try{if(typeof SupabaseClient<"u"&&SupabaseClient.client){const d=e,{data:c}=await SupabaseClient.client.from("courses").select("meta").eq("slug",d).maybeSingle();c&&c.meta&&c.meta.customTabNames&&(window.courseData[e].customTabNames=c.meta.customTabNames)}}catch(d){console.warn("[CourseLoader] Supabase meta sync failed:",d)}window.Performance&&window.Performance.measure("Load Course (Script): "+e,"load_course_"+e),o(window.courseData[e])},s.onerror=()=>{t<1?(console.warn(`[CourseLoader] Retry ${t+1}/1 for: ${e}`),s.remove(),setTimeout(()=>{CourseLoader$1.loadCourse(e,t+1).then(o).catch(a)},1e3*(t+1))):a(new Error(`Failed to load course after 1 retries: ${e}`))},document.head.appendChild(s)}),loadAll:async()=>{await CourseLoader$1.init();const e=Object.keys(CourseLoader$1.manifest).map(t=>CourseLoader$1.loadCourse(t).catch(r=>(console.warn(`[CourseLoader] Warning: Failed to load '${t}'. Skipping.`,r),null)));return Promise.all(e)},preloadEssentials:()=>{["data/tips.js","data/quiz.js"].forEach(t=>{if(!document.querySelector(`script[src="${t}"]`)){const r=document.createElement("script");r.src=t,document.head.appendChild(r)}})}};window.CourseLoader=CourseLoader$1;const courseLoader=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),Progress$1={data:{},scores:{},dates:[],isLoading:!1,isInitialized:!1,_getKey:()=>{if(typeof Store<"u"&&Store.getCurrentCourseKey){const e=Store.getCurrentCourseKey();if(e)return e}return window._appState?.currentCourseKey?window._appState.currentCourseKey:typeof app<"u"&&app.state?.currentCourseKey?app.state.currentCourseKey:(console.warn("[Progress] Could not get current course key"),null)},_getCourseData:()=>window.courseData||{},_getStudentId:()=>typeof Auth>"u"?null:Auth.currentStudent?.studentId?Auth.currentStudent.studentId:Auth.currentUser?.id?Auth.currentUser.id:null,init:async()=>{Progress$1.isInitialized||(typeof Auth<"u"&&Auth.isLoggedIn()&&await Progress$1.loadFromServer(),Progress$1.isInitialized=!0)},loadFromServer:async()=>{const e=Progress$1._getStudentId();if(!e)return;if(!(typeof Validators<"u"?Validators.isValidUUID(e):/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(e))){console.warn("[Progress] Invalid student_id (not UUID), clearing invalid session:",e),typeof Auth<"u"&&(localStorage.removeItem("yeti_student_session"),localStorage.removeItem("yeti_user_role"),Auth.currentStudent=null,Auth.userRole=null);return}Progress$1.isLoading=!0;try{const{data:r,error:i}=await SupabaseClient.getClient().from("student_progress").select("course_id, project_id, completed_at, quiz_score").eq("student_id",e);if(i)throw i;Progress$1.data={},Progress$1.scores={},Progress$1.dates=[],(r||[]).forEach(o=>{Progress$1.data[o.course_id]||(Progress$1.data[o.course_id]=[],Progress$1.scores[o.course_id]={}),Progress$1.data[o.course_id].push(o.project_id),o.quiz_score&&(Progress$1.scores[o.course_id][o.project_id]=o.quiz_score),o.completed_at&&Progress$1.dates.push(o.completed_at)})}catch(r){console.error("[Progress] Failed to load from server:",r),Toast?.apiError(r,"ƒ∞lerleme verileri y√ºkleme")}finally{Progress$1.isLoading=!1}},saveToServer:async(e,t,r)=>{const i=Progress$1._getStudentId();if(!i)return!1;try{if(r){const o={student_id:i,course_id:e,project_id:t,completed_at:new Date().toISOString()},{error:a}=await SupabaseClient.getClient().from("student_progress").upsert(o,{onConflict:"student_id,project_id"});if(a)throw console.error("[Progress] Save error:",a.message),a}else{const{error:o}=await SupabaseClient.getClient().from("student_progress").delete().eq("student_id",i).eq("project_id",t);if(o)throw console.error("[Progress] Delete error:",o.message),o}return!0}catch(o){return console.error("[Progress] Failed:",o.message),Toast?.error("ƒ∞lerleme kaydedilemedi. L√ºtfen tekrar deneyin."),!1}},toggle:async e=>{const t=Progress$1._getKey();if(!t)return;if(!(typeof Auth<"u"&&Auth.isLoggedIn())){confirm("ƒ∞lerlemenizi kaydetmek i√ßin giri≈ü yapmanƒ±z gerekiyor. Giri≈ü sayfasƒ±na gitmek ister misiniz?")&&Router.redirectTo("auth.html");return}Progress$1.data[t]||(Progress$1.data[t]=[]);const i=Progress$1.data[t].indexOf(e),o=i===-1;o?Progress$1.data[t].push(e):Progress$1.data[t].splice(i,1),typeof Progress$1.onUpdate=="function"&&Progress$1.onUpdate(e),await Progress$1.saveToServer(t,e,o)},isComplete:e=>{const t=Progress$1._getKey();return Progress$1.data[t]&&Progress$1.data[t].includes(e)},getCompleted:()=>{let e=[];return Object.values(Progress$1.data).forEach(t=>{e=e.concat(t)}),e},getRate:e=>{if(typeof Auth<"u"&&!Auth.isLoggedIn())return 0;const t=Progress$1.data[e]?Progress$1.data[e].length:0,i=Progress$1._getCourseData()[e]?.data?.projects?.length||1;return Math.round(t/i*100)},getStats:()=>{if(typeof Auth<"u"&&!Auth.isLoggedIn())return{totalLessons:0,badges:0,streak:0,quizAvg:0};const e=Progress$1.getCompleted(),t=Progress$1.scores||{},r=Object.keys(t);let i=0;r.forEach(p=>i+=t[p]);const o=r.length>0?i/r.length:0,a=Progress$1.dates||[];let n=0;if(a.length>0){const p=a.map(y=>new Date(y).toDateString()).sort((y,l)=>new Date(l)-new Date(y)),b=[...new Set(p)],S=new Date().toDateString(),k=new Date;k.setDate(k.getDate()-1);const L=k.toDateString();if(b.includes(S)||b.includes(L)){n=1;let y=new Date(b[0]);for(let l=1;l<b.length;l++){const w=new Date(b[l]),v=Math.abs(y-w);if(Math.ceil(v/(1e3*60*60*24))===1)n++,y=w;else break}}}const s=e.length*150;let d=[];window.BadgeSystem?d=window.BadgeSystem.calculateEarned({totalLessons:e.length,quizAvg:o,streak:n}):e.length>=1&&d.push("newbie");const c=d.length*500,g=s+c,m=Math.floor(g/1e3)+1,f=m*1e3,u=g%1e3/1e3*100;return{totalLessons:e.length,quizAvg:Math.round(o),streak:n,badges:d.length,earnedBadges:d,xp:g,level:m,levelProgress:Math.round(u),nextLevelXP:f}},getStudentProgress:async(e,t)=>{try{const{data:r,error:i}=await SupabaseClient.getClient().from("student_progress").select("project_id, completed_at, quiz_score").eq("student_id",e).eq("course_id",t);if(i)throw i;return r||[]}catch(r){return console.error("[Progress] Failed to get student progress:",r),[]}},getClassroomProgress:async e=>{try{const{data:t,error:r}=await SupabaseClient.getClient().from("students").select("id, display_name").eq("classroom_id",e);if(r)throw r;if(!t||t.length===0)return[];const i=t.map(n=>n.id),{data:o,error:a}=await SupabaseClient.getClient().from("student_progress").select("student_id, course_id, project_id, completed_at").in("student_id",i);if(a)throw a;return t.map(n=>({...n,progress:(o||[]).filter(s=>s.student_id===n.id)}))}catch(t){return console.error("[Progress] Failed to get classroom progress:",t),[]}},onUpdate:null,load:()=>{},save:()=>{}};window.Progress=Progress$1;const UI$1={switchView:e=>{const t=["course-selection-view","dashboard-view","project-view"],r=["teacher-view-container","admin-view-container","profile-view-container","student-dashboard-container"],i=[...t,...r],o=document.getElementById(e);if(!o){console.warn(`[UI] View not found: ${e}`);return}const a=i.find(d=>{const c=document.getElementById(d);return c&&!c.classList.contains("hidden")}),n=a?document.getElementById(a):null;if(a===e)return;n?(n.classList.add("view-exit-start"),requestAnimationFrame(()=>{n.classList.add("view-exit-active")}),setTimeout(()=>{n.classList.add("hidden"),n.classList.remove("view-exit-start","view-exit-active"),o.classList.remove("hidden"),o.classList.add("view-enter-start"),requestAnimationFrame(()=>{requestAnimationFrame(()=>{o.classList.remove("view-enter-start"),o.classList.add("view-enter-active"),setTimeout(()=>{o.classList.remove("view-enter-active")},300)})})},300)):i.forEach(d=>{const c=document.getElementById(d);c&&(d===e?c.classList.remove("hidden"):c.classList.add("hidden"))});const s=document.getElementById("btn-lessons-nav");s&&(["dashboard-view","project-view"].includes(e)?s.classList.remove("hidden"):s.classList.add("hidden"))},renderCourseSelection:e=>{UI$1.switchView("course-selection-view");const t=document.getElementById("course-list");if(!t)return;const r=t.querySelectorAll(".course-card"),i=r.length>0&&!t.querySelector(".skeleton-card"),o=Object.keys(e).length;if(i&&r.length===o){console.log("[UI] Stale-While-Revalidate: Content already rendered, skipping re-render");return}document.querySelectorAll("#show-all-courses-btn").forEach(u=>u.remove()),typeof Auth<"u"&&Auth.isStudent()&&Auth.currentStudent;const a=typeof Progress<"u"?Progress.data:{},n={default:["Ke≈üfet","Ba≈üla","Hadi Ba≈üla!"],robot:["Robotunu Kodla!","Maceraya Atƒ±l","ƒ∞lk Robotunu Yap"],scratch:["Oyun Yapmaya Ba≈üla!","Hayal Et & Kodla","Yaratƒ±cƒ±lƒ±ƒüƒ±nƒ± G√∂ster"],web:["ƒ∞lk Siteni Yap!","Tasarlamaya Ba≈üla","Kodlamaya Ba≈üla"],python:["Python Yolculuƒüu","Kodlamaya Ba≈üla","Programcƒ± Ol"],inProgress:["Kaldƒ±ƒüƒ±n Yerden Devam Et","Devam Et ‚Üí","Hadi Bitir!"],completed:["Tekrar √á√∂z","Ustala≈ü","Peki≈ütir"]},s=(u,p)=>{if(p>=100)return n.completed[Math.floor(Math.random()*n.completed.length)];if(p>0)return n.inProgress[Math.floor(Math.random()*n.inProgress.length)];const b=u.toLowerCase();return b.includes("mbot")||b.includes("robot")||b.includes("arduino")?n.robot[Math.floor(Math.random()*n.robot.length)]:b.includes("scratch")||b.includes("oyun")?n.scratch[Math.floor(Math.random()*n.scratch.length)]:b.includes("web")||b.includes("html")||b.includes("css")?n.web[Math.floor(Math.random()*n.web.length)]:b.includes("python")||b.includes("kod")?n.python[Math.floor(Math.random()*n.python.length)]:n.default[Math.floor(Math.random()*n.default.length)]},d=u=>u===0?{level:1,label:"Ba≈ülangƒ±√ß",color:"gray",icon:"üå±"}:u<25?{level:1,label:"√áaylak",color:"green",icon:"üåø"}:u<50?{level:2,label:"√ñƒürenci",color:"blue",icon:"üìö"}:u<75?{level:3,label:"Yetenekli",color:"purple",icon:"‚≠ê"}:u<100?{level:4,label:"Uzman",color:"orange",icon:"üî•"}:{level:5,label:"Usta",color:"yellow",icon:"üëë"},c=Object.entries(e),g=window.innerWidth<768,m=g?4:c.length,f=(u,p,b,S=!1)=>{const k=window.courseData&&window.courseData[u],L=k?.title||p.title,y=k?.description||p.description,l=k?.icon||p.icon||"ü§ñ",w=a[u]?a[u].length:0,v=k?.data?.projects?.length||p.projectCount||10,_=Math.round(w/v*100),I=d(_),C=s(u,_),x=S?"hidden":"",A=I.level*50;return`
                <div onclick="app.selectCourse('${u}', event)" 
                     class="course-card card-glow bg-white dark:bg-slate-900 rounded-2xl shadow-md p-4 lg:p-5 cursor-pointer group flex flex-col items-center text-center min-h-[200px] relative overflow-hidden transition-all duration-300 hover:-translate-y-2 hover:scale-105 border border-slate-200 dark:border-slate-700 ${x}" 
                     data-course="${u}"
                     data-index="${b}">
                    
                    <!-- Enhanced Level Badge with High Contrast (larger on mobile) -->
                    <div class="level-badge level-badge-enhanced absolute top-2 right-2 flex items-center gap-1 px-2.5 py-1.5 lg:px-2.5 lg:py-1 rounded-full text-[11px] lg:text-xs cursor-pointer hover:scale-110 transition-transform z-30 bg-slate-100 dark:bg-slate-700 border border-slate-300 dark:border-slate-500 shadow-md" data-tooltip="Sonraki Seviye: ${A} XP">
                        <span class="text-xs">${I.icon}</span>
                        <span class="font-bold text-slate-700 dark:text-slate-100">Lv.${I.level}</span>
                    </div>
                    
                    <!-- Icon -->
                    <div class="text-4xl lg:text-5xl mb-2 lg:mb-3 bg-slate-100 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 p-3 lg:p-4 rounded-full group-hover:scale-110 group-hover:rotate-3 transition-all duration-300 relative z-20">
                        ${l}
                    </div>
                    
                    <!-- Title -->
                    <h3 class="text-sm lg:text-lg text-gray-800 dark:text-gray-100 mb-1 lg:mb-2 group-hover:text-transparent group-hover:bg-clip-text group-hover:bg-gradient-to-r group-hover:from-cyan-400 group-hover:to-teal-400 transition-colors font-bold line-clamp-2">${L}</h3>
                    
                    <!-- Description (hidden on mobile) -->
                    <p class="hidden lg:block text-gray-500 dark:text-gray-400 text-xs leading-relaxed line-clamp-2">${y}</p>
                    
                    <!-- Progress Bar with Glow Effect -->
                    <div class="mt-auto pt-2 lg:pt-3 w-full">
                        <div class="w-full bg-gray-200 dark:bg-gray-700/50 rounded-full h-1.5 lg:h-2 overflow-hidden">
                            <div class="h-full rounded-full ${_>0?"bg-gradient-to-r from-teal-400 to-cyan-400 progress-glow":"bg-gray-300 dark:bg-gray-600"} transition-all duration-500" style="width: ${_}%"></div>
                        </div>
                        <p class="text-xs text-gray-400 dark:text-gray-500 mt-1 hidden lg:block">${w>0?`${w}/${v} ders`:"Hen√ºz ba≈ülamadƒ±n"}</p>
                    </div>
                    
                    <!-- CTA Button with Vibrant Orange-Red Gradient (visible on all screens) -->
                    <div class="mt-3 w-full relative z-10">
                        <span class="block w-full py-2 lg:py-2.5 px-3 lg:px-4 bg-gradient-to-r from-[#FF8C00] to-[#FF4500] text-white rounded-xl font-bold text-xs lg:text-sm shadow-lg shadow-orange-500/30 group-hover:shadow-orange-500/50 group-hover:brightness-110 transition-all text-center">
                            ${C} üöÄ
                        </span>
                    </div>
                    
                    <!-- Peek Yeti (appears on hover, on top of button) -->
                    <div class="absolute -bottom-2 -right-2 lg:-bottom-4 lg:-right-4 w-12 h-12 lg:w-24 lg:h-24 opacity-0 group-hover:opacity-100 transition-all duration-300 pointer-events-none z-30 group-hover:translate-y-[-4px]">
                        <img src="img/yeti-peek.png" alt="" width="96" height="96" class="w-full h-full object-contain drop-shadow-lg" />
                    </div>
                </div>`};let h="";if(c.forEach(([u,p],b)=>{const S=g&&b>=m;h+=f(u,p,b,S)}),t.innerHTML=h,g&&c.length>m){const u=document.createElement("div");u.id="show-all-courses-btn",u.className="col-span-2 flex items-center justify-center",u.innerHTML=`
                <button onclick="UI.toggleAllCourses()" 
                        class="w-full py-3 px-4 bg-gradient-to-r from-[#FF8C00] to-[#FF4500] text-white rounded-xl font-bold text-sm shadow-lg shadow-orange-500/30 hover:shadow-orange-500/50 hover:brightness-110 transition-all flex items-center justify-center gap-2">
                    <span>üìö T√ºm Kurslarƒ± G√∂r</span>
                    <span class="bg-white/20 px-2 py-0.5 rounded-full text-xs">${c.length-m} daha</span>
                </button>
            `,t.appendChild(u)}},toggleAllCourses:()=>{const e=document.querySelectorAll(".course-card.hidden"),t=document.getElementById("show-all-courses-btn");if(e.length>0)e.forEach(r=>{r.classList.remove("hidden"),r.classList.add("fade-in")}),t&&(t.innerHTML=`
                    <button onclick="UI.toggleAllCourses()" 
                            class="w-full py-3 px-4 bg-gray-200 text-gray-700 rounded-xl font-bold text-sm hover:bg-gray-300 transition-all flex items-center justify-center gap-2">
                        <span>‚Üë Daha Az G√∂ster</span>
                    </button>
                `);else{const r=document.querySelectorAll(".course-card");if(r.forEach((i,o)=>{o>=4&&(i.classList.add("hidden"),i.classList.remove("fade-in"))}),t){const i=r.length-4;t.innerHTML=`
                    <button onclick="UI.toggleAllCourses()" 
                            class="w-full py-3 px-4 bg-gradient-to-r from-[#FF8C00] to-[#FF4500] text-white rounded-xl font-bold text-sm shadow-lg shadow-orange-500/30 hover:shadow-orange-500/50 hover:brightness-110 transition-all flex items-center justify-center gap-2">
                        <span>üìö T√ºm Kurslarƒ± G√∂r</span>
                        <span class="bg-white/20 px-2 py-0.5 rounded-full text-xs">${i} daha</span>
                    </button>
                `}document.getElementById("course-list")?.scrollIntoView({behavior:"smooth",block:"start"})}},_loadingStates:new Map,_spinnerSVG:`<svg class="w-5 h-5" viewBox="0 0 24 24" fill="none">
        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
        <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
    </svg>`,setButtonLoading:(e,t,r)=>{if(!e)return;const i=e.id||e.dataset.loadingId||`btn-${Date.now()}`;if(e.dataset.loadingId=i,t){if(UI$1._loadingStates.has(i))return;UI$1._loadingStates.set(i,{content:r||e.innerHTML,disabled:e.disabled}),e.disabled=!0,e.classList.add("is-loading"),e.innerHTML=`<span class="btn-spinner">${UI$1._spinnerSVG}<span>${I18n?.t("loading")||"Y√ºkleniyor..."}</span></span>`}else{const o=UI$1._loadingStates.get(i);o&&(e.innerHTML=o.content,e.disabled=o.disabled,e.classList.remove("is-loading"),UI$1._loadingStates.delete(i))}},isLoading:e=>UI$1._loadingStates.has(e),setActionLoading:(e,t)=>{t?UI$1._loadingStates.set(e,!0):UI$1._loadingStates.delete(e)},renderSkeletonCards:(e,t=4)=>{const r=document.getElementById(e);if(!r)return;let i="";for(let o=0;o<t;o++)i+=`
                <div class="skeleton-card flex flex-col items-center text-center h-full">
                    <div class="skeleton skeleton-icon"></div>
                    <div class="skeleton skeleton-title"></div>
                    <div class="skeleton skeleton-text"></div>
                    <div class="skeleton skeleton-text" style="width: 60%;"></div>
                    <div class="skeleton skeleton-btn"></div>
                </div>`;r.innerHTML=i},setCardLoading:(e,t)=>{if(e)if(t){e.classList.add("is-loading");const r=document.createElement("div");r.className="loading-overlay",r.innerHTML='<span class="pulse-loading text-4xl">‚è≥</span>',e.style.position="relative",e.appendChild(r)}else{e.classList.remove("is-loading");const r=e.querySelector(".loading-overlay");r&&r.remove()}},showLoading:(e,t)=>{const r=t||I18n.t("loading"),i=document.getElementById(e);i&&(i.innerHTML=`
                <div class="col-span-full text-center py-20">
                    <div class="text-6xl mb-4 animate-bounce">‚è≥</div>
                    <p class="text-gray-500 font-bold">${r}</p>
                </div>`)},showError:(containerId,msg,retryAction)=>{const container=document.getElementById(containerId),errorMessage=msg||I18n.t("error_loading");retryAction&&window.Toast?.errorWithRetry?Toast.errorWithRetry(errorMessage,()=>{try{eval(retryAction)}catch(e){console.error(e)}}):Services.toast.error(errorMessage),container&&(container.innerHTML=`
                <div class="col-span-full text-center py-20 text-red-500">
                    <div class="text-6xl mb-4">‚ùå</div>
                    <p class="font-bold">${errorMessage}</p>
                    ${retryAction?`<button onclick="${retryAction}" class="mt-4 px-4 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 font-semibold transition-colors">${I18n.t("back")}</button>`:""}
                </div>`)},renderDashboard:(e,t,r)=>{UI$1.switchView("dashboard-view");const i=document.getElementById("dashboard-content");if(i.innerHTML="",i.classList.add("dashboard-content"),e.length===0){i.innerHTML=`<div class="text-center text-slate-400 py-10">${I18n.t("no_content")}</div>`;return}const o=typeof Auth<"u"&&(Auth.isStudent()||Auth.isTeacher()||Auth.isAdmin());e.forEach((a,n)=>{const s=t.filter(h=>h.phase===n);if(s.length===0)return;const c=n===0?I18n.t("intro"):`${I18n.t("episode")} ${n}`,g=a.icon||(a.title&&typeof a.title=="string"?a.title.split(" ")[0]:"üìÇ"),m=a.description||"";let f=`
                <div class="phase-header">
                    <span class="phase-header-icon">${g}</span>
                    <h3 class="phase-header-title">${c}</h3>
                    <span class="phase-header-desc">${m}</span>
                </div>
                <div class="flex gap-3 overflow-x-auto pb-4 scrollbar-hide" style="-webkit-overflow-scrolling: touch;">`;s.forEach(h=>{const u=r.isComplete(h.id),p=u?100:0,b=!o&&n>0,S=b?"lesson-locked":"";f+=`
                    <div onclick="${b?"Router.redirectTo('auth.html')":`app.loadProject(${h.id})`}" 
                         class="lesson-card flex-shrink-0 w-32 sm:w-36 p-3 border border-gray-200 dark:border-gray-700 bg-white dark:bg-slate-800 shadow-sm rounded-xl ${S}">
                        ${u?'<div class="lesson-complete-badge">‚úì</div>':""}
                        ${b?'<div class="lesson-lock-icon">üîí</div>':""}
                        <div class="lesson-icon">${h.icon}</div>
                        <h3 class="lesson-title line-clamp-2">${h.title}</h3>
                        <div class="flex items-center justify-between mt-2 lesson-meta">
                            <span>#${h.id}</span>
                            ${h.simType!=="none"?'<span class="text-blue-400">üî¨</span>':""}
                        </div>
                        <div class="lesson-progress">
                            <div class="lesson-progress-fill" style="width: ${p}%"></div>
                        </div>
                    </div>
                `}),f+="</div>",i.innerHTML+=f})},renderProgressBar:e=>{const t=document.getElementById("course-progress-bar"),r=document.getElementById("course-progress-text"),i=typeof Auth<"u"&&(Auth.isStudent()||Auth.isTeacher()||Auth.isAdmin());t&&(t.style.width=`${e}%`),r&&(i?r.innerText=I18n.t("percent_completed",{rate:e}):(r.innerText="üîê Giri≈ü yap",r.style.cursor="pointer",r.onclick=()=>Router.redirectTo("auth.html")))},renderSidebar:(e,t,r)=>{const i=document.getElementById("sidebar-content");i.innerHTML="",!(!e||e.length===0)&&e.forEach((o,a)=>{const n=t.filter(s=>s.phase===a);n.length!==0&&(i.innerHTML+=`<div class="font-bold text-slate-400 uppercase text-xs mt-4 mb-2 px-2 tracking-wider">${o.title}</div>`,n.forEach(s=>{const c=r===s.id?"active-lesson bg-orange-500/20 text-orange-400 font-bold border-r-4 border-orange-500":"text-slate-300 hover:bg-slate-700/50 hover:text-white border-r-4 border-transparent";i.innerHTML+=`
                <div onclick="app.loadProject(${s.id}); app.toggleSidebar();" 
                     class="cursor-pointer p-3 rounded-l-lg text-sm transition flex items-center ${c}">
                     <span class="mr-3 text-lg">${s.icon}</span> ${s.title}
                </div>`}))})},toggleSidebar:(e=null)=>{const t=document.getElementById("lesson-sidebar"),r=document.getElementById("sidebar-overlay");if(!t||!r){console.warn("[UI] Sidebar veya overlay bulunamadƒ±");return}const i=t.classList.contains("open");(e!==null?e:!i)?(t.classList.remove("invisible","-translate-x-full"),t.classList.add("open"),r.classList.add("open"),document.body.style.overflow="hidden"):(t.classList.remove("open"),r.classList.remove("open"),setTimeout(()=>{t.classList.contains("open")||t.classList.add("invisible","-translate-x-full")},350),document.body.style.overflow="")},initSidebarLinks:()=>{const e=document.getElementById("lesson-sidebar");e&&e.addEventListener("click",t=>{const r=t.target.closest(".sidebar-close-btn");(t.target.closest('[onclick*="loadProject"]')||r)&&UI$1.toggleSidebar(!1)})},toggleMobileSearch:()=>{const e=document.getElementById("mobile-search-overlay"),t=document.getElementById("mobileSearchInput");e.classList.contains("hidden")?(e.classList.remove("hidden"),t.focus(),document.body.style.overflow="hidden"):(e.classList.add("hidden"),t.value="",document.getElementById("mobileSearchResults").innerHTML="",document.body.style.overflow="")},renderTabs:(e,t,r,i)=>{const o=document.getElementById("tab-content-area"),a=document.getElementById("project-tabs-container"),n=l=>l?l.startsWith("http://")||l.startsWith("https://")||l.startsWith("img/")?l:`img/${l}`:"",s=(l,w)=>`
            <div class="mb-4 text-center group relative inline-block cursor-zoom-in" onclick="UI.openImageModal('${l}', '${w||""}')">
                <img src="${l}" class="max-w-full h-auto mx-auto rounded shadow" onerror="this.parentElement.innerHTML='<div class=\\'bg-gray-100 p-4 rounded border-2 border-dashed\\'>${I18n.t("img_not_found")}</div>'">
                <div class="absolute inset-0 bg-black/0 group-hover:bg-black/10 transition flex items-center justify-center pointer-events-none">
                     <span class="opacity-0 group-hover:opacity-100 bg-white/90 text-gray-800 px-3 py-1 rounded-full shadow-lg text-sm font-bold transform scale-90 group-hover:scale-100 transition-all duration-300">${I18n.t("zoom_in")}</span>
                </div>
            </div>`,d=n(e.circuitImage||`devre${e.id}.jpg`),c=s(d,I18n.t("header_circuit"));let g="";if(e.youtubeUrl){const l=UI$1.extractYouTubeId(e.youtubeUrl);l&&(g=`
                    <div class="mt-6 bg-gradient-to-br from-red-50 to-pink-50 dark:from-red-900/20 dark:to-pink-900/20 p-4 rounded-xl border-2 border-red-200 dark:border-red-800">
                        <div class="flex items-center gap-2 mb-3">
                            <span class="text-2xl">üé¨</span>
                            <h4 class="font-bold text-gray-800 dark:text-gray-200">Video A√ßƒ±klama</h4>
                        </div>
                        <div class="aspect-video rounded-lg overflow-hidden shadow-lg bg-black">
                            <iframe 
                                width="100%" 
                                height="100%" 
                                src="https://www.youtube.com/embed/${l}" 
                                frameborder="0" 
                                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                                allowfullscreen
                                class="w-full h-full"
                            ></iframe>
                        </div>
                    </div>
                `)}let m='<div class="space-y-4">';e.materials.forEach(l=>{const w=Object.keys(t).find(v=>v===l||t[v].name===l);if(w){const v=t[w],_=n(v.imgFileName);m+=`
                    <div class="flex items-start bg-white p-3 rounded shadow-sm border">
                        <div class="w-16 h-16 flex-shrink-0 mr-4 border rounded overflow-hidden bg-gray-100 group relative cursor-zoom-in" onclick="UI.openImageModal('${_}', '${v.name.replace(/'/g,"\\'")}')">
                            <img src="${_}" class="w-full h-full object-cover" onerror="this.style.display='none'">
                            <div class="absolute inset-0 bg-black/0 group-hover:bg-black/20 flex items-center justify-center transition-colors">
                                <span class="text-white opacity-0 group-hover:opacity-100">üîç</span>
                            </div>
                        </div>
                        <div>
                            <h4 class="font-bold text-gray-800">${v.name}</h4>
                            <p class="text-xs text-gray-600 mt-1">${v.desc}</p>
                        </div>
                    </div>`}else m+=`
                    <div class="flex items-center bg-gray-50 p-3 rounded border border-dashed">
                        <div class="w-2 h-2 rounded-full bg-gray-400 mr-3"></div>
                        <span class="text-gray-700 font-medium">${l}</span>
                    </div>`}),m+="</div>";const f=window.TabConfig?.getConfig(r)||window.TabConfig?.courses.default;let h=f.tabs;const u=f.headers,p={mission:`<div class="fade-in">
                <h3 class="font-bold text-xl mb-2 text-theme">${I18n.t("header_mission")}</h3>
                <p>${e.mission}</p>
                <div class="bg-gray-50 p-4 rounded mt-4 border-l-4 border-theme">${e.theory}</div>
            </div>`,circuit:`<div class="fade-in"><h3 class="font-bold mb-4 text-theme">${I18n.t("header_circuit")}</h3>${c}<p>${e.circuit_desc}</p></div>`,code:(()=>{const l=e.code||"";return l.match(/\.(jpeg|jpg|gif|png)$/)!=null?`<div class="fade-in">
                        <h3 class="font-bold text-xl mb-2 text-theme">${I18n.t("tab_blocks")}</h3>
                        <div class="group relative inline-block cursor-zoom-in w-full" onclick="UI.openImageModal('img/${l}', '${I18n.t("tab_blocks")}')">
                            <img src="img/${l}" class="w-full rounded shadow transition-transform group-hover:scale-[1.01]" onerror="this.parentElement.innerHTML='Resim bulunamadƒ±: ${l}'">
                            <div class="absolute top-2 right-2 bg-black/50 text-white rounded-full p-2 opacity-0 group-hover:opacity-100 transition-opacity">
                                üîç
                            </div>
                        </div>
                    </div>`:`<div class="fade-in">
                        <button onclick="navigator.clipboard.writeText(app.currentProject.code);alert('${I18n.t("msg_copied")}')" class="bg-gray-200 px-2 py-1 text-xs rounded mb-2 hover:bg-gray-300 transition">${I18n.t("btn_copy_code")}</button>
                        <pre class="bg-gray-800 text-green-400 p-4 rounded text-sm overflow-auto max-h-64 code-scroll mb-4">${l||"# Kod yok"}</pre>
                    </div>`})(),challenge:`<div class="fade-in text-center py-8">
                <div class="text-4xl mb-2">üèÜ</div>
                <h3 class="font-bold text-theme text-lg">${I18n.t("header_challenge")}</h3>
                <p class="text-gray-600 mt-2">${e.challenge}</p>
            </div>`,tip:(()=>{const l=app.getPracticalTip(e);return`<div class="fade-in bg-yellow-50 border-l-4 border-yellow-400 p-6 rounded shadow-sm">
                    <div class="flex items-start">
                        <div class="text-4xl mr-4">${l.icon}</div>
                        <div>
                            <h3 class="font-bold text-gray-800 text-lg mb-1">${l.title}</h3>
                            <p class="text-gray-700 leading-relaxed">${l.text}</p>
                        </div>
                    </div>
                </div>`})(),quiz:(()=>{const l=e.quiz||window.quizData&&window.quizData[e.id],w=i.isComplete(e.id),v=`
                    <div class="mt-8 border-t pt-6 text-center">
                        <button id="btn-complete-project" onclick="app.progress.toggle(${e.id})" 
                            class="${w?"bg-green-500 text-white":"bg-gray-200 text-gray-600 hover:bg-green-500 hover:text-white"} 
                            w-full md:w-2/3 py-4 rounded-xl shadow-lg font-bold text-xl transition transform hover:scale-105 active:scale-95">
                            ${w?I18n.t("completed"):I18n.t("btn_complete")}
                        </button>
                        <p class="text-xs text-gray-400 mt-2">${I18n.t("msg_progress_saved")}</p>
                    </div>`;if(!l)return`<div class="text-center py-10 text-gray-400">Bu ders i√ßin hen√ºz test eklenmemi≈ü.</div>${v}`;let _=`<div class="fade-in space-y-6">
                    <h3 class="font-bold text-xl text-theme mb-4">${I18n.t("header_quiz")}</h3>`;return l.forEach((I,C)=>{_+=`
                        <div class="bg-gray-50 p-4 rounded-lg border border-gray-200 quiz-question" id="q-${C}">
                            <p class="font-bold text-gray-800 mb-3">${C+1}. ${I.q}</p>
                            <div class="space-y-2">
                                ${I.options.map((x,A)=>`
                                    <button onclick="app.checkAnswer(${C}, ${A}, ${I.answer}, this)" 
                                            class="w-full text-left p-3 rounded bg-white border border-gray-200 hover:bg-gray-100 transition flex items-center group">
                                        <span class="w-6 h-6 rounded-full border border-gray-300 flex items-center justify-center mr-3 text-xs font-bold bg-gray-50 group-hover:bg-theme group-hover:text-white transition-colors">${["A","B","C","D"][A]}</span>
                                        ${x}
                                    </button>
                                `).join("")}
                            </div>
                            <div class="quiz-feedback hidden mt-3 p-3 rounded font-bold text-sm"></div>
                        </div>`}),_+=`</div>${v}`,_})()},b={mission:p.mission,materials:`<div class="fade-in"><h3 class="font-bold mb-4 text-theme">${u.materials||"Devre Elemanlarƒ±"}</h3>${m}</div>`,circuit:`<div class="fade-in"><h3 class="font-bold mb-4 text-theme">${u.circuit||"Baƒülantƒ± ≈ûemasƒ±"}</h3>${c}<p>${e.circuit_desc}</p>${g}</div>`,code:u.code?`<div class="fade-in"><h3 class="font-bold text-xl mb-2 text-theme">${u.code}</h3>${p.code.replace(/<div class="fade-in">|<\/div>/g,"")}</div>`:p.code,design:u.circuit?`<div class="fade-in"><h3 class="font-bold mb-4 text-theme">${u.circuit}</h3>${c}<p>${e.circuit_desc}</p></div>`:null,blocks:u.code?`<div class="fade-in"><h3 class="font-bold text-xl mb-2 text-theme">${u.code||"Blok Kodlarƒ±"}</h3>${p.code.replace(/<div class="fade-in">|<\/div>/g,"")}</div>`:null,challenge:p.challenge,tip:p.tip,quiz:p.quiz};f.mapping&&Object.keys(f.mapping).forEach(l=>{l==="blocks"&&!b.blocks?b[l]=`<div class="fade-in"><h3 class="font-bold text-xl mb-2 text-theme">${I18n.t("tab_blocks")}</h3>${p.code.replace(/<div class="fade-in">|<\/div>/g,"")}</div>`:l==="design"&&!b.design&&(b[l]=b.circuit)}),e.hiddenTabs&&Array.isArray(e.hiddenTabs)&&(h=h.filter(l=>!e.hiddenTabs.includes(l.id)));let S={};try{const l=localStorage.getItem("mucit_atolyesi_autosave");l&&(S=JSON.parse(l).data?.[r]?.customTabNames||{})}catch{}if(Object.keys(S).length===0){const l=window.courseData?.[r];l&&(S=l.customTabNames||l.settings?.tab_names||l.meta?.customTabNames||{})}const k={mission:"üéØ",materials:"üß©",circuit:"‚ö°",design:"üé®",code:"üíª",blocks:"üß©",challenge:"üèÜ",tip:"üí°",quiz:"üìù"};a.innerHTML=h.map(l=>{let w=l.label;const v=Object.keys(S).find(x=>x.toLowerCase()===l.id.toLowerCase());if(v&&S[v]?w=S[v]:l.id==="circuit"&&(S.simulation?w=S.simulation:S.phases&&(w=S.phases)),!w||w===l.label){const x="tab_"+l.id;I18n.translations.tr[x]&&(w=I18n.t(x))}const _=k[l.id]||"üìÑ",C=/[\p{Emoji}\u2580-\u2FFF\u200d\uFE0F]/u.test(w)?"":`<span class="lesson-tab-icon">${_}</span>`;return`<button class="lesson-tab whitespace-nowrap" data-tab="${l.id}">${C}${w}</button>`}).join("");const L=document.querySelectorAll(".lesson-tab"),y=l=>{L.forEach(w=>w.classList.remove("active")),l.classList.add("active"),o.innerHTML=b[l.dataset.tab]||I18n.t("no_content")};L.forEach(l=>l.onclick=()=>y(l)),L.length>0&&y(L[0])},toggleFullscreen:e=>{const t=document.getElementById(e);t&&(document.fullscreenElement?document.exitFullscreen?.()||document.webkitExitFullscreen?.()||document.msExitFullscreen?.():t.requestFullscreen?.()||t.webkitRequestFullscreen?.()||t.msRequestFullscreen?.())},openImageModal:(e,t)=>{const r=document.getElementById("image-modal"),i=document.getElementById("modal-img"),o=document.getElementById("modal-caption"),a=document.getElementById("modal-content");i.src=e,o.innerText=t||"",o.style.display=t?"block":"none",r.classList.remove("hidden"),setTimeout(()=>{r.classList.remove("opacity-0"),a.classList.remove("scale-95"),a.classList.add("scale-100")},10)},closeImageModal:()=>{const e=document.getElementById("image-modal"),t=document.getElementById("modal-content");e.classList.add("opacity-0"),t.classList.remove("scale-100"),t.classList.add("scale-95"),setTimeout(()=>{e.classList.add("hidden"),document.getElementById("modal-img").src=""},300)},showInfo:(e,t)=>{document.getElementById("info-title").innerText=t||I18n.t("info_title"),document.getElementById("info-desc").innerText=e},setupInteractiveArea:e=>{const t=document.getElementById("interactive-area"),r=document.getElementById("interactive-info");t.classList.remove("hidden"),r.classList.remove("hidden"),document.getElementById("sim-title").innerText=I18n.t("sim_explore"),document.getElementById("sim-badge").innerText=I18n.t("sim_learn"),t.innerHTML=e},setupCustomHotspots:e=>{const t=document.getElementById("interactive-area"),r=document.getElementById("interactive-info");document.getElementById("simCanvas").classList.add("hidden"),t.classList.remove("hidden"),r.classList.remove("hidden"),document.getElementById("sim-title").innerHTML=`<span class="mr-2">üéØ</span> ${I18n.t("sim_interactive_img")}`,document.getElementById("sim-badge").innerText=I18n.t("sim_discover");const o=e.circuitImage?e.circuitImage.startsWith("img/")?e.circuitImage:`img/${e.circuitImage}`:`img/devre${e.id}.jpg`,a=(e.hotspots||[]).map((n,s)=>`
            <div class="absolute w-8 h-8 bg-orange-500/80 border-2 border-white rounded-full shadow-lg flex items-center justify-center text-sm text-white font-bold cursor-pointer hover:bg-orange-600 hover:scale-110 transition-all z-10"
                style="left: calc(${n.x}% - 16px); top: calc(${n.y}% - 16px);"
                onmouseover="UI.showInfo('${(n.desc||"").replace(/'/g,"\\'")}', '${n.name.replace(/'/g,"\\'")}')"
                onmouseout="UI.showInfo('${I18n.t("exp_hotspot_msg")}', '${I18n.t("sim_discover")}')"
                title="${n.name}">
                ${s+1}
            </div>
        `).join("");t.innerHTML=`
            <div class="relative w-full h-full bg-gray-100 flex items-center justify-center">
                <img src="${o}" class="max-h-full max-w-full object-contain" 
                    onerror="this.parentElement.innerHTML='<div class=\\'text-center p-4\\'>${I18n.t("img_not_found")}: ${o}</div>'">
                ${a}
            </div>`,UI$1.showInfo(I18n.t("exp_hotspot_msg"),I18n.t("sim_discover"))},extractYouTubeId:e=>{if(!e)return null;e=e.trim();const t=e.match(/[?&]v=([^&#]+)/);if(t)return t[1];const r=e.match(/youtu\.be\/([^?&#]+)/);if(r)return r[1];const i=e.match(/youtube\.com\/embed\/([^?&#]+)/);return i?i[1]:null}};window.UI=UI$1;const Search={_selectCourse:null,_loadProject:null,init:(e,t)=>{Search._selectCourse=e,Search._loadProject=t;const r=document.getElementById("searchInput"),i=document.getElementById("searchResults");r&&(r.addEventListener("input",o=>Search.handle(o.target.value)),r.addEventListener("blur",()=>{setTimeout(()=>i?.classList.add("hidden"),200)}),r.addEventListener("focus",()=>{r.value.trim().length>=2&&i?.classList.remove("hidden")}))},handle:e=>{const t=document.getElementById("searchResults");if(!t)return;const r=e.trim().toLowerCase();if(r.length<2){t.classList.add("hidden");return}const i=window.courseData||{},o=[];Object.keys(i).forEach(a=>{const n=i[a];n.data?.projects&&n.data.projects.forEach(s=>{`${s.title} ${s.desc} ${s.mission||""}`.toLowerCase().includes(r)&&o.push({courseKey:a,courseTitle:n.title,id:s.id,title:s.title,icon:s.icon})})}),o.length>0?(t.innerHTML=o.slice(0,8).map(a=>`
                <div onclick="Search.navigate('${a.courseKey}', ${a.id})" 
                     class="p-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-0 flex items-start">
                    <div class="text-2xl mr-3 bg-gray-100 p-2 rounded">${a.icon||"üìù"}</div>
                    <div>
                        <div class="font-bold text-gray-800 text-sm">${a.title}</div>
                        <div class="text-xs text-gray-500">${a.courseTitle}</div>
                    </div>
                </div>
            `).join(""),t.classList.remove("hidden")):(t.innerHTML='<div class="p-4 text-sm text-gray-500 text-center">Sonu√ß bulunamadƒ±.</div>',t.classList.remove("hidden"))},navigate:(e,t)=>{const r=document.getElementById("searchResults"),i=document.getElementById("searchInput");r&&r.classList.add("hidden"),i&&(i.value="");const o=document.getElementById("mobile-search-overlay");o&&!o.classList.contains("hidden")&&app.toggleMobileSearch(),Search._selectCourse&&Search._selectCourse(e),Search._loadProject&&Search._loadProject(t)},handleMobile:e=>{const t=document.getElementById("mobileSearchResults");if(!t)return;const r=e.trim().toLowerCase();if(r.length<2){t.innerHTML='<div class="text-center text-gray-400 py-8">En az 2 karakter girin...</div>';return}const i=window.courseData||{},o=[];Object.keys(i).forEach(a=>{const n=i[a];n.data?.projects&&n.data.projects.forEach(s=>{`${s.title} ${s.desc} ${s.mission||""}`.toLowerCase().includes(r)&&o.push({courseKey:a,courseTitle:n.title,id:s.id,title:s.title,icon:s.icon})})}),o.length>0?t.innerHTML=o.slice(0,10).map(a=>`
                <div onclick="Search.navigate('${a.courseKey}', ${a.id})" 
                     class="p-4 bg-white rounded-xl shadow-sm border border-gray-100 flex items-center active:bg-gray-50 cursor-pointer">
                    <div class="text-3xl mr-4 bg-gray-100 p-3 rounded-lg">${a.icon||"üìù"}</div>
                    <div>
                        <div class="font-bold text-gray-800">${a.title}</div>
                        <div class="text-sm text-gray-500">${a.courseTitle}</div>
                    </div>
                </div>
            `).join(""):t.innerHTML='<div class="text-center text-gray-500 py-8">üîç Sonu√ß bulunamadƒ±</div>'}};window.Search=Search;const ScrollManager={config:{scrollDelta:8,topThreshold:80,velocityThreshold:15,toggleCooldown:100},state:{lastScrollY:0,lastScrollTime:Date.now(),ticking:!1,isHidden:!1,lastToggleTime:0,accumulatedDelta:0,touchStartY:0,isTouching:!1},elements:{header:null,bottomNav:null},init(){this.elements.header=document.getElementById("main-header"),this.elements.bottomNav=document.getElementById("mobile-bottom-nav"),window.addEventListener("scroll",this.handleScroll.bind(this),{passive:!0}),window.addEventListener("touchstart",this.handleTouchStart.bind(this),{passive:!0}),window.addEventListener("touchend",this.handleTouchEnd.bind(this),{passive:!0}),document.addEventListener("visibilitychange",()=>{document.hidden||this.show()}),window.addEventListener("resize",this.debounce(()=>{window.scrollY<this.config.topThreshold&&this.show()},150)),this.handleScroll(),console.log("üìú ScrollManager initialized (Smart Scroll active)")},handleTouchStart(e){this.state.touchStartY=e.touches[0].clientY,this.state.isTouching=!0},handleTouchEnd(){this.state.isTouching=!1},handleScroll(){this.state.ticking||(window.requestAnimationFrame(()=>{this.updateNavVisibility(),this.state.ticking=!1}),this.state.ticking=!0)},updateNavVisibility(){const e=window.scrollY,t=Date.now(),r=t-this.state.lastScrollTime,i=e-this.state.lastScrollY,o=r>0?Math.abs(i)/r*16:0;if(this.updateHeaderBackdrop(e),e<=this.config.topThreshold){this.show(),this.resetState(e,t);return}if(t-this.state.lastToggleTime<this.config.toggleCooldown){this.state.lastScrollY=e;return}Math.sign(i)===Math.sign(this.state.accumulatedDelta)?this.state.accumulatedDelta+=i:this.state.accumulatedDelta=i;const a=Math.abs(this.state.accumulatedDelta);o>=this.config.velocityThreshold?(i>0?this.hide():this.show(),this.state.lastToggleTime=t):a>=this.config.scrollDelta&&(this.state.accumulatedDelta>0&&!this.state.isHidden?(this.hide(),this.state.lastToggleTime=t):this.state.accumulatedDelta<0&&this.state.isHidden&&(this.show(),this.state.lastToggleTime=t),this.state.accumulatedDelta=0),this.state.lastScrollY=e,this.state.lastScrollTime=t},updateHeaderBackdrop(e){const t=this.elements.header;t&&(e<=10?t.classList.remove("header-scrolled"):t.classList.add("header-scrolled"))},hide(){this.state.isHidden||(this.elements.header?.classList.add("nav-hidden"),this.elements.bottomNav?.classList.add("nav-hidden"),this.state.isHidden=!0)},show(){!this.state.isHidden&&window.scrollY>this.config.topThreshold||(this.elements.header?.classList.remove("nav-hidden"),this.elements.bottomNav?.classList.remove("nav-hidden"),this.state.isHidden=!1)},resetState(e,t){this.state.lastScrollY=e,this.state.lastScrollTime=t,this.state.accumulatedDelta=0},forceShow(){this.show(),this.state.lastToggleTime=0},debounce(e,t){let r;return(...i)=>{clearTimeout(r),r=setTimeout(()=>e.apply(this,i),t)}},isNavHidden(){return this.state.isHidden}};typeof window<"u"&&(window.ScrollManager=ScrollManager);const scriptRel="modulepreload",assetsURL=function(e,t){return new URL(e,t).href},seen={},__vitePreload=function e(t,r,i){let o=Promise.resolve();if(r&&r.length>0){const n=document.getElementsByTagName("link"),s=document.querySelector("meta[property=csp-nonce]"),d=s?.nonce||s?.getAttribute("nonce");o=Promise.allSettled(r.map(c=>{if(c=assetsURL(c,i),c in seen)return;seen[c]=!0;const g=c.endsWith(".css"),m=g?'[rel="stylesheet"]':"";if(!!i)for(let u=n.length-1;u>=0;u--){const p=n[u];if(p.href===c&&(!g||p.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${m}`))return;const h=document.createElement("link");if(h.rel=g?"stylesheet":scriptRel,g||(h.as="script"),h.crossOrigin="",h.href=c,d&&h.setAttribute("nonce",d),document.head.appendChild(h),g)return new Promise((u,p)=>{h.addEventListener("load",u),h.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(n){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=n,window.dispatchEvent(s),!s.defaultPrevented)throw n}return o.then(n=>{for(const s of n||[])s.status==="rejected"&&a(s.reason);return t().catch(a)})},Navbar={isOnSPA:()=>{const e=window.location.pathname;return e.endsWith("index.html")||e.endsWith("/")||e.endsWith("-Yeti-LAB")||e.endsWith("-Yeti-LAB/")},navigateSPA:e=>{if(e==="/"){if(window.location.search){const t=window.location.pathname+"#/";window.history.replaceState(null,"",t)}if(Navbar.isOnSPA()&&window.app?.renderCourseSelection){window.location.hash="#/",app.renderCourseSelection(!1);return}}Navbar.isOnSPA()?window.Router?Router.navigate(e):window.location.hash="#"+e:window.location.href="index.html#"+e},render:(e="main-header")=>{const t=typeof e=="string"?document.getElementById(e):e;if(!t)return;const r=`
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-24 items-center"> <a href="index.html#/" 
                   onclick="event.preventDefault(); Navbar.navigateSPA('/');" 
                   class="flex-shrink-0 flex items-center gap-4 cursor-pointer group no-underline">
                    
                    <div class="relative w-16 h-16 md:w-20 md:h-20 transition-transform group-hover:scale-110 duration-300">
                        <div class="absolute inset-0 bg-gradient-to-tr from-theme to-cyan-300 rounded-2xl rotate-6 group-hover:rotate-12 transition-transform opacity-20"></div>
                        <div class="absolute inset-0 bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700 flex items-center justify-center overflow-hidden">
                                <img src="img/logo.svg" alt="YetiLAB" class="w-12 h-12 md:w-14 md:h-14 object-contain" />
                        </div>
                    </div>
                    
                    <div class="flex flex-col brand-logo">
                        <span class="text-3xl md:text-4xl font-black text-gray-800 dark:text-white tracking-tight leading-none group-hover:text-theme transition-colors">
                            Yeti<span class="brand-lab text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-teal-400 font-black">LAB</span>
                        </span>
                    </div>
                </a>

                <div class="flex items-center gap-2">

                    <div id="navbar-notification-section" class="relative hidden"></div>
                    <div id="navbar-auth-section" class="ml-2">
                        <div class="animate-pulse flex space-x-2">
                            <div class="w-10 h-10 bg-gray-200 rounded-lg"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        `;t.innerHTML=r,Navbar.updateAuthUI(),window.ThemeManager&&window.ThemeManager.init&&window.ThemeManager.init()},updateAuthUI:(e=0)=>{const t=document.getElementById("navbar-auth-section");if(!t){e<10&&setTimeout(()=>Navbar.updateAuthUI(e+1),100);return}const r=window.Store?.getState()?.user||window.Auth?.currentUser,i=document.getElementById("navbar-notification-section");if(r){i&&(i.classList.remove("hidden"),Navbar.initNotifications());const o=r,a=o.user_metadata||{},s=(a.role||window.Auth?.userRole||"student")==="teacher"||window.Auth&&window.Auth.isTeacher(),d=window.Auth?.getDisplayName?.()||a.full_name||o.email?.split("@")[0]||"Kullanƒ±cƒ±",c=a.avatar_url||"üë§",m=!c.includes(".")?`<span class="text-xl">${c}</span>`:`<img src="${c}" class="w-6 h-6 rounded-full object-cover">`,f=window.Auth&&window.Auth.isAdmin();t.innerHTML=`
                <div class="relative group" id="user-menu-wrapper">
                    <button onclick="document.getElementById('user-dropdown').classList.toggle('hidden')" 
                        class="flex items-center gap-2 px-3 py-2 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg hover:bg-white dark:hover:bg-gray-700 hover:shadow-md transition-all">
                        <div class="w-8 h-8 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center border border-gray-200 dark:border-gray-600 group-hover:border-theme transition-colors">
                            ${m}
                        </div>
                        <span class="hidden md:inline font-bold text-gray-700 dark:text-gray-200 text-sm max-w-[100px] truncate">${d}</span>
                        <span class="text-xs text-gray-400">‚ñº</span>
                    </button>
                    <div id="user-dropdown" class="absolute right-0 top-full pt-2 w-56 hidden group-hover:block z-50">
                        <div class="bg-white dark:bg-gray-800 rounded-xl shadow-xl border border-gray-100 dark:border-gray-700 overflow-hidden">
                            <div class="p-4 border-b border-gray-50 dark:border-gray-700 flex items-center gap-3">
                                <div class="w-10 h-10 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center text-xl">
                                    ${m}
                                </div>
                                <div>
                                    <div class="font-bold text-gray-800 dark:text-white text-sm">${d}</div>
                                    <div class="text-xs text-gray-500 dark:text-gray-400">${f?"Y√∂netici":s?"Eƒüitmen":"√ñƒürenci"}</div>
                                </div>
                            </div>
                            <div class="py-1">
                                <a href="index.html#/profile" onclick="event.preventDefault(); Navbar.navigateSPA('/profile')" class="flex items-center gap-3 px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-600 dark:text-gray-300 hover:text-theme transition-colors"><span>üë§</span> Profilim</a>
                                ${s?`<a href="index.html#/teacher" onclick="event.preventDefault(); Navbar.navigateSPA('/teacher')" class="flex items-center gap-3 px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-600 dark:text-gray-300 hover:text-blue-600 transition-colors"><span>üë®üè´</span> √ñƒüretmen Paneli</a>`:""}
                                ${f?`<a href="index.html#/admin" onclick="event.preventDefault(); Navbar.navigateSPA('/admin')" class="flex items-center gap-3 px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-600 dark:text-gray-300 hover:text-purple-600 transition-colors"><span>‚öôÔ∏è</span> Admin Paneli</a>`:""}
                            </div>
                            <div class="border-t border-gray-100 dark:border-gray-700 p-1">
                                <button onclick="logout()" class="w-full flex items-center gap-3 px-4 py-3 hover:bg-red-50 dark:hover:bg-red-900/20 text-red-500 rounded-lg transition-colors font-medium"><span>üö™</span> √áƒ±kƒ±≈ü Yap</button>
                            </div>
                        </div>
                    </div>
                </div>`,document.addEventListener("click",h=>{const u=document.getElementById("user-menu-wrapper"),p=document.getElementById("user-dropdown");u&&!u.contains(h.target)&&p&&!p.classList.contains("hidden")&&p.classList.add("hidden")})}else i&&i.classList.add("hidden"),t.innerHTML=`
                <a href="auth.html" class="group flex items-center gap-2 px-5 py-2.5 bg-gradient-to-r from-teal-500 to-cyan-400 text-white rounded-xl font-bold shadow-lg shadow-cyan-500/30 hover:shadow-cyan-500/50 hover:-translate-y-0.5 transition-all">
                    <span class="rocket-icon inline-block transition-transform group-hover:rotate-[-15deg] group-hover:-translate-y-0.5">üöÄ</span>
                    <span>Giri≈ü Yap</span>
                </a>`},initNotifications:async()=>{const e=document.getElementById("navbar-notification-section");if(e){if(!window.NotificationDropdown)try{await __vitePreload(()=>import("./NotificationDropdown-CJw1YDo0.js"),__vite__mapDeps([0,1,2]),import.meta.url)}catch(t){console.error("[Navbar] NotificationDropdown hatasƒ±:",t);return}e.innerHTML=`${NotificationDropdown.renderBellIcon()}${NotificationDropdown.renderDropdown()}`,await NotificationDropdown.init()}},init:()=>{Navbar.render(),window.Store&&window.Store.subscribe((e,t)=>{(e.user!==t?.user||e.userProfile!==t?.userProfile)&&Navbar.updateAuthUI()})}};window.Navbar=Navbar;const Footer={render:(e="main-footer")=>{const t=typeof e=="string"?document.getElementById(e):e;if(!t)return;const i=`
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <div class="flex flex-col md:flex-row items-center justify-between gap-4">
                
                <!-- Brand & Copyright -->
            <div class="flex items-center gap-2">
                <div class="w-8 h-8 bg-white dark:bg-gray-800 rounded-lg flex items-center justify-center shadow-sm border border-gray-100 dark:border-gray-700 p-1">
                    <img src="img/logo.svg" alt="Logo" class="w-full h-full object-contain" />
                </div>
                <p class="text-gray-500 dark:text-gray-400 text-sm font-medium">
                    ¬© ${new Date().getFullYear()} Yeti <span class="text-theme">LAB</span> - ƒ∞√ßindeki Yeti'yi Ke≈üfet
                </p>
            </div>

                <!-- Links -->
                <div class="flex items-center gap-6 text-sm text-gray-500">
                    <a href="#" class="hover:text-theme transition-colors">Hakkƒ±mƒ±zda</a>
                    <a href="#" class="hover:text-theme transition-colors">Gizlilik</a>
                    <a href="#" class="hover:text-theme transition-colors">ƒ∞leti≈üim</a>
                </div>
            </div>
            
            <div class="mt-4 text-center md:text-right">
             <p class="text-xs text-gray-400">Versiyon 2.0 ‚Ä¢ <span class="text-theme">Beta</span></p>
            </div>
        </div>
        `;t.innerHTML=i,t.className="bg-white dark:bg-gray-900 border-t border-gray-100 dark:border-gray-800 mt-auto transition-colors duration-300"},init:()=>{Footer.render()}};window.Footer=Footer;const MainLayout={init:()=>{window.Navbar?window.Navbar.init():console.warn("Navbar module not found"),window.Footer?window.Footer.init():console.warn("Footer module not found"),MainLayout.adjustContentSpacing(),window.addEventListener("resize",MainLayout.adjustContentSpacing)},adjustContentSpacing:()=>{document.getElementById("main-header"),document.querySelector("main")}};window.MainLayout=MainLayout;const ViewManager$1={currentView:null,container:null,debug:!0,init(e="main-content"){this.container=document.getElementById(e),this.container||console.warn(`[ViewManager] Container '${e}' bulunamadƒ±`),this.debug&&console.log("üé¨ ViewManager initialized",{containerId:e})},async mount(e,t={}){if(!e)return console.error("[ViewManager] mount() √ßaƒürƒ±ldƒ± ama View null/undefined"),!1;const r=e.name||e.constructor?.name||"UnknownView";this.currentView&&this.currentView!==e&&await this.unmountCurrent(),this.currentView=e;const i=t.container||this.container;if(!i)return console.error(`[ViewManager] Mount i√ßin container bulunamadƒ± (${r})`),!1;if(typeof e.mount=="function")try{return await e.mount(i,t),this.debug&&console.log(`‚úÖ [ViewManager] Mounted: ${r}`,t),!0}catch(o){return console.error(`[ViewManager] Mount hatasƒ± (${r}):`,o),!1}else return console.warn(`[ViewManager] ${r} view'ƒ±nda mount() metodu yok`),!1},async unmountCurrent(){if(!this.currentView)return;const e=this.currentView.name||"CurrentView";if(typeof this.currentView.unmount=="function")try{await this.currentView.unmount(),this.debug&&console.log(`üîÑ [ViewManager] Unmounted: ${e}`)}catch(t){console.error(`[ViewManager] Unmount hatasƒ± (${e}):`,t)}this.currentView=null},getCurrentView(){return this.currentView},isActive(e){return this.currentView===e},setDebug(e){this.debug=e}};window.ViewManager=ViewManager$1;const ViewLoader={_loadedScripts:new Set,loadScript:e=>new Promise((t,r)=>{if(ViewLoader._loadedScripts.has(e)){t();return}if(document.querySelector(`script[src="${e}"]`)){ViewLoader._loadedScripts.add(e),t();return}const o={"modules/courseLoader.js":()=>typeof window.CourseLoader<"u","config/tabs.js":()=>typeof window.TabConfig<"u","modules/themes.js":()=>typeof window.applyTheme<"u","data/base.js":()=>typeof window.courseData<"u","data/quiz.js":()=>typeof window.quizQuestions<"u"}[e];if(o&&o()){ViewLoader._loadedScripts.add(e),t();return}const a=document.createElement("script");a.src=e,a.onload=()=>{ViewLoader._loadedScripts.add(e),console.log(`[ViewLoader] Loaded: ${e}`),t()},a.onerror=()=>{console.error(`[ViewLoader] Failed to load: ${e}`),r(new Error(`Failed to load ${e}`))},document.body.appendChild(a)}),loadScripts:async e=>{for(const t of e)await ViewLoader.loadScript(t)},getOrCreateContainer:(e,t="hidden")=>{let r=document.getElementById(e);return r||(r=document.createElement("div"),r.id=e,r.className=t,(document.getElementById("main-content")||document.querySelector("main")||document.body).appendChild(r)),r},loadAdminView:async e=>{console.log("[ViewLoader] Loading admin view:",e),window.AdminView||await ViewLoader.loadAdminScripts();const t=ViewLoader.getOrCreateContainer("admin-view-container","hidden");if(window.UI?.switchView&&UI.switchView("admin-view-container"),window.AdminView?.isLoaded){console.log("[ViewLoader] AdminView already loaded, just switching section"),ViewLoader._handleAdminSection(e);return}let r=!1;window.ViewManager&&window.AdminView?r=await ViewManager.mount(AdminView,{route:e,container:t}):window.AdminView&&(r=await AdminView.mount(t)),r&&ViewLoader._handleAdminSection(e)},_handleAdminSection:e=>{window.AdminView?.showSection&&(e==="admin-projects"||e==="admin"?AdminView.showSection("projects"):e==="admin-phases"?AdminView.showSection("phases"):e==="admin-components"&&AdminView.showSection("components"))},loadAdminScripts:async()=>{if(console.log("[ViewLoader] Loading admin scripts..."),window.AdminView&&window.AdminLayout&&window.ProjectManager){console.log("[ViewLoader] Admin scripts already bundled, skipping");return}try{await __vitePreload(()=>import("./elements-B6vvoLHy.js"),[],import.meta.url),await __vitePreload(()=>Promise.resolve().then(()=>base),void 0,import.meta.url),await __vitePreload(()=>Promise.resolve().then(()=>courseLoader),void 0,import.meta.url),await __vitePreload(()=>Promise.resolve().then(()=>quiz),void 0,import.meta.url),await __vitePreload(()=>import("./router-IanoY4pe.js").then(e=>e.t),__vite__mapDeps([1,2]),import.meta.url),await __vitePreload(()=>Promise.resolve().then(()=>tabs),void 0,import.meta.url),await __vitePreload(()=>import("./state-DYDQyGH6.js"),[],import.meta.url),await __vitePreload(()=>import("./ui-Di5Wyggz.js"),[],import.meta.url),await __vitePreload(()=>import("./backup-CB9sGFnD.js"),[],import.meta.url),await __vitePreload(()=>import("./richTextEditor-CIP-T4Wf.js"),[],import.meta.url),await __vitePreload(()=>import("./projectEditor-BD1BEA3U.js"),[],import.meta.url),await __vitePreload(()=>import("./storage-DsuVJKiL.js"),[],import.meta.url),await __vitePreload(()=>import("./courses-CeRticIv.js"),[],import.meta.url),await __vitePreload(()=>import("./phases-DyUA5OvD.js"),[],import.meta.url),await __vitePreload(()=>import("./components-cUif-x1N.js"),[],import.meta.url),await __vitePreload(()=>import("./projects-DJSGzjcK.js"),[],import.meta.url),await __vitePreload(()=>import("./settings-D9T_cots.js"),[],import.meta.url),await __vitePreload(()=>import("./supabase-sync-BhM7Zg2d.js"),[],import.meta.url),await __vitePreload(()=>import("./hotspots-CIjc1ODi.js"),[],import.meta.url),await __vitePreload(()=>import("./images-CrZzoAmh.js"),[],import.meta.url),await __vitePreload(()=>import("./quizzes-DGbw2z46.js"),[],import.meta.url),await __vitePreload(()=>import("./quizManager-7g46fFqR.js"),[],import.meta.url),await __vitePreload(()=>import("./admin-G3aQe0hQ.js"),[],import.meta.url),await __vitePreload(()=>import("./AdminLayout-D8ivdKT-.js"),[],import.meta.url),await __vitePreload(()=>import("./ProjectsSection-CoXlVZdw.js"),[],import.meta.url),await __vitePreload(()=>import("./PhasesSection-ZmXBwxSs.js"),[],import.meta.url),await __vitePreload(()=>import("./ComponentsSection-Cy1aFuqI.js"),[],import.meta.url),await __vitePreload(()=>import("./AdminModals-D5nOouyZ.js"),[],import.meta.url),await __vitePreload(()=>import("./AdminView-DFGHG84U.js"),[],import.meta.url),console.log("[ViewLoader] Admin scripts loaded via dynamic import")}catch(e){throw console.error("[ViewLoader] Failed to load admin scripts:",e),e}},loadTeacherView:async e=>{console.log("[ViewLoader] Loading teacher view:",e),window.TeacherView||await ViewLoader.loadTeacherScripts();const t=ViewLoader.getOrCreateContainer("teacher-view-container","hidden");if(window.UI?.switchView&&UI.switchView("teacher-view-container"),window.TeacherView?.isLoaded){console.log("[ViewLoader] TeacherView already loaded, just switching section"),ViewLoader._handleTeacherSection(e);return}let r=!1;window.ViewManager&&window.TeacherView?r=await ViewManager.mount(TeacherView,{route:e,container:t}):window.TeacherView&&(r=await TeacherView.mount(t)),r&&ViewLoader._handleTeacherSection(e)},_handleTeacherSection:e=>{window.TeacherView?.showSection&&(e==="teacher-classrooms"?TeacherView.showSection("classrooms",!1):e==="teacher-students"?TeacherView.showSection("students",!1):e==="teacher-assignments"?TeacherView.showSection("assignments",!1):e==="teacher-courses"?TeacherView.showSection("courses",!1):e==="teacher-analytics"&&TeacherView.showSection("analytics",!1))},loadTeacherScripts:async()=>{if(console.log("[ViewLoader] Loading teacher scripts..."),window.TeacherView&&window.TeacherLayout&&window.TeacherManager){console.log("[ViewLoader] Teacher scripts already bundled, skipping");return}try{await __vitePreload(()=>import("./classrooms-BX0DOH59.js"),[],import.meta.url),await __vitePreload(()=>import("./students-D1fkuwjc.js"),[],import.meta.url),await __vitePreload(()=>import("./analytics-B_bBON3F.js"),[],import.meta.url),await __vitePreload(()=>import("./analyticsService-DZVX51D5.js"),__vite__mapDeps([3,1,2]),import.meta.url),await __vitePreload(()=>import("./teacher-manager-COWVRRWV.js"),[],import.meta.url),await __vitePreload(()=>import("./assignmentService-Dx49dVZK.js"),[],import.meta.url),await __vitePreload(()=>import("./courseEnrollmentService-DjD8RC3o.js"),__vite__mapDeps([4,1,2]),import.meta.url),await __vitePreload(()=>import("./TeacherLayout-AKdQLfaM.js"),[],import.meta.url),await __vitePreload(()=>import("./DashboardSection-DXx6YbjT.js"),[],import.meta.url),await __vitePreload(()=>import("./ClassroomsSection-DiItu3UM.js"),[],import.meta.url),await __vitePreload(()=>import("./StudentsSection-27AfU1G_.js"),[],import.meta.url),await __vitePreload(()=>import("./AssignmentsSection-FEKamczP.js"),[],import.meta.url),await __vitePreload(()=>import("./CoursesSection-sj6wZA6R.js"),__vite__mapDeps([5,1,2]),import.meta.url),await __vitePreload(()=>import("./AnalyticsSection-v04UR6B2.js"),__vite__mapDeps([6,1,2]),import.meta.url),await __vitePreload(()=>import("./TeacherModals-CpYGhKBX.js"),[],import.meta.url),await __vitePreload(()=>import("./AssignmentModals-BnrItXOU.js"),[],import.meta.url),await __vitePreload(()=>import("./TeacherView-DLxQdARE.js"),[],import.meta.url),console.log("[ViewLoader] Teacher scripts loaded via dynamic import")}catch(e){throw console.error("[ViewLoader] Failed to load teacher scripts:",e),e}},loadProfileView:async e=>{console.log("[ViewLoader] Loading profile view:",e),window.ProfileView||await ViewLoader.loadProfileScripts();const t=ViewLoader.getOrCreateContainer("profile-view-container","");window.UI?.switchView&&UI.switchView("profile-view-container"),window.ViewManager&&window.ProfileView?await ViewManager.mount(ProfileView,{route:e,container:t}):window.ProfileView&&await ProfileView.mount(t)},loadProfileScripts:async()=>{if(console.log("[ViewLoader] Loading profile scripts..."),window.ProfileView&&window.Profile&&window.turkeyData){console.log("[ViewLoader] Profile scripts already bundled, skipping");return}try{await __vitePreload(()=>import("./router-IanoY4pe.js").then(e=>e.c),__vite__mapDeps([1,2]),import.meta.url),await __vitePreload(()=>import("./router-IanoY4pe.js").then(e=>e.v),__vite__mapDeps([1,2]),import.meta.url),await __vitePreload(()=>import("./cities-COSScdHh.js"),[],import.meta.url),await __vitePreload(()=>import("./router-IanoY4pe.js").then(e=>e.b),__vite__mapDeps([1,2]),import.meta.url),await __vitePreload(()=>import("./profile-ClaXxfHg.js"),[],import.meta.url),await __vitePreload(()=>import("./ProfileView-ZS5yhHBw.js"),[],import.meta.url),console.log("[ViewLoader] Profile scripts loaded via dynamic import")}catch(e){throw console.error("[ViewLoader] Failed to load profile scripts:",e),e}},loadStudentDashboardView:async()=>{console.log("[ViewLoader] Loading student dashboard view..."),window.StudentDashboardView||await ViewLoader.loadStudentDashboardScripts();const e=ViewLoader.getOrCreateContainer("student-dashboard-container","");window.UI?.switchView&&UI.switchView("student-dashboard-container"),window.ViewManager&&window.StudentDashboardView?await ViewManager.mount(StudentDashboardView,{container:e}):window.StudentDashboardView&&await StudentDashboardView.mount(e)},loadStudentDashboardScripts:async()=>{console.log("[ViewLoader] Loading student dashboard scripts...");try{await __vitePreload(()=>Promise.resolve().then(()=>courseLoader),void 0,import.meta.url),await __vitePreload(()=>import("./studentSubmissionService-DTom8qWh.js"),[],import.meta.url),await __vitePreload(()=>import("./courseEnrollmentService-DjD8RC3o.js"),__vite__mapDeps([4,1,2]),import.meta.url),await __vitePreload(()=>import("./StudentAssignmentsSection-D2pk-Ea0.js"),[],import.meta.url),await __vitePreload(()=>import("./StudentCoursesSection-DIH26QLe.js"),__vite__mapDeps([7,4,1,2]),import.meta.url),await __vitePreload(()=>import("./StudentSubmissionModal-CK78EcIJ.js"),[],import.meta.url),await __vitePreload(()=>import("./StudentDashboardView-wd9R02ua.js"),[],import.meta.url),console.log("[ViewLoader] Student dashboard scripts loaded via dynamic import")}catch(e){throw console.error("[ViewLoader] Failed to load student dashboard scripts:",e),e}}};window.ViewLoader=ViewLoader;const SimController={state:{val1:0,val2:0,active:!1,timer:0,angle:0,dir:2,lastTick:Date.now(),themeColor:"#00979C"},loop:null,chartInstance:null,lastFrameTime:0,targetFPS:30,currentProject:null,stop:()=>{SimController.loop&&(cancelAnimationFrame(SimController.loop),SimController.loop=null),SimController.chartInstance&&(SimController.chartInstance.destroy(),SimController.chartInstance=null)},setProject:e=>{SimController.currentProject=e},getState:()=>SimController.state,setState:e=>{Object.assign(SimController.state,e)},setup:(e,t={})=>{const r=document.getElementById("simCanvas");if(!r){console.error("[SimController] Canvas element not found");return}const i=r.getContext("2d");r.width=t.width||500,r.height=t.height||350;const o=getComputedStyle(document.documentElement).getPropertyValue("--theme-color").trim()||"#00979C";SimController.state.themeColor=o;const a=document.getElementById("dataChart");if(a&&SimController.currentProject?.hasGraph){const n=a.getContext("2d");SimController.chartInstance&&SimController.chartInstance.destroy(),SimController.chartInstance=new Chart(n,{type:"line",data:{labels:Array(20).fill(""),datasets:[{data:Array(20).fill(0),borderColor:o,tension:.3}]},options:{responsive:!0,maintainAspectRatio:!1,animation:!1,plugins:{legend:{display:!1}},scales:{y:{display:!0}}}})}if(window.Simulations?.[e]?.setup){const n=SimController._createAppInterface();window.Simulations[e].setup(n)}else SimController.setControls(`<div class="text-red-500 text-xs">Sim√ºlasyon Bulunamadƒ±: ${e}</div>`);SimController.loop=requestAnimationFrame(()=>SimController._runLoop(i,e))},setControls:e=>{const t=document.getElementById("simControls");t&&(t.innerHTML=e)},_runLoop:(e,t)=>{const r=Date.now(),i=1e3/SimController.targetFPS;if(r-SimController.lastFrameTime<i){SimController.loop=requestAnimationFrame(()=>SimController._runLoop(e,t));return}SimController.lastFrameTime=r,e.clearRect(0,0,500,350);let o=0;if(window.Simulations?.[t]?.draw){const a=SimController._createAppInterface();o=window.Simulations[t].draw(e,a,r)}if(SimController.currentProject?.hasGraph&&SimController.chartInstance&&o!==void 0){const a=SimController.chartInstance.data.datasets[0].data;a.shift(),a.push(o),SimController.chartInstance.update("none")}SimController.loop=requestAnimationFrame(()=>SimController._runLoop(e,t))},_createAppInterface:()=>({simState:SimController.state,chartInstance:SimController.chartInstance,currentProject:SimController.currentProject,setControls:SimController.setControls,get simLoop(){return SimController.loop},set simLoop(e){SimController.loop=e}})};window.SimController=SimController;const SimHelpers={hexToRgba:(e,t=1)=>{let r;return/^#([A-Fa-f0-9]{3}){1,2}$/.test(e)?(r=e.substring(1).split(""),r.length===3&&(r=[r[0],r[0],r[1],r[1],r[2],r[2]]),r="0x"+r.join(""),"rgba("+[r>>16&255,r>>8&255,r&255].join(",")+","+t+")"):e},drawBoard:(e,t="#00979C")=>{e.fillStyle=t,e.fillRect(50,200,150,100),e.fillStyle="white",e.font="12px Arial",e.fillText("UNO",60,220)},drawLED:(e,t,r,i,o)=>{e.fillStyle=o?i:"#333",e.beginPath(),e.arc(t,r,15,0,6.28),e.fill(),o&&(e.shadowBlur=15,e.shadowColor=i,e.stroke(),e.shadowBlur=0)},createStandardSimulation:({type:e,label:t,min:r=0,max:i=1023,buttonText:o,onDraw:a})=>({setup:n=>{n.simState.val1=e==="slider"?r+(i-r)/2:0,n.simState.active=!1,e==="slider"?n.setControls(`
                        <span class="mr-2 text-xs font-bold">${t||"Deƒüer"}:</span>
                        <input type="range" min="${r}" max="${i}" value="${n.simState.val1}" class="w-full" 
                               oninput="app.simState.val1=parseInt(this.value)">
                    `):e==="button"?n.setControls(`
                        <button onmousedown="app.simState.active=true" onmouseup="app.simState.active=false" 
                                class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 rounded transition shadow">
                            ${o||"BAS"}
                        </button>
                    `):e==="info"&&n.setControls(`<div class="text-center text-xs text-gray-500 font-bold">${t}</div>`)},draw:(n,s,d)=>{const c=s.simState.themeColor||"#00979C";SimHelpers.drawBoard(n,c),a&&a(n,s,d,s.simState.val1,s.simState.active)}}),drawBarSensor:(e,t,r,i,o,a,n)=>{const s=i/o*200;e.fillStyle="#eee",e.fillRect(t,r-200,50,200),e.fillStyle=a,e.fillRect(t,r-s,50,s),e.fillStyle="#000",e.font="12px sans-serif",e.fillText(`${n}: ${i}`,t,r+20)},drawLamp:(e,t,r,i)=>{e.fillStyle=i,e.beginPath(),e.arc(t,r,20,0,6.28),e.fill(),e.fillStyle="#555",e.fillRect(t-5,r+20,10,100)}},Simulations={blink:SimHelpers.createStandardSimulation({type:"info",label:"Otomatik Yanƒ±p S√∂nme",onDraw:(e,t,r)=>{SimHelpers.drawLED(e,120,250,"orange",r%1e3<500),e.fillStyle="#333",e.fillText("13",100,260)}}),traffic:SimHelpers.createStandardSimulation({type:"info",label:"Otomatik D√∂ng√º: K > S > Y",onDraw:(e,t,r)=>{e.fillStyle="#333",e.fillRect(200,50,80,200);const i=r%8e3;SimHelpers.drawLED(e,240,90,"red",i<3e3),SimHelpers.drawLED(e,240,150,"yellow",i>=3e3&&i<4e3),SimHelpers.drawLED(e,240,210,"green",i>=4e3&&i<7e3)}}),button:SimHelpers.createStandardSimulation({type:"button",buttonText:"BAS",onDraw:(e,t,r,i,o)=>{SimHelpers.drawLED(e,300,200,"red",o)}}),pot:SimHelpers.createStandardSimulation({type:"slider",label:"Diren√ß",min:0,max:1023,onDraw:(e,t,r,i)=>{const o=i/1023;SimHelpers.drawLED(e,300,200,`rgba(255,255,0,${o})`,!0)}}),rgb:SimHelpers.createStandardSimulation({type:"info",label:"Otomatik Renk D√∂ng√ºs√º",onDraw:(e,t,r)=>{const i=Math.sin(r*.002)*127+128,o=Math.sin(r*.003)*127+128,a=Math.sin(r*.004)*127+128;e.fillStyle=`rgb(${i},${o},${a})`,e.beginPath(),e.arc(250,175,50,0,6.28),e.fill()}}),dht:SimHelpers.createStandardSimulation({type:"slider",label:"Sƒ±caklƒ±k",min:0,max:50,onDraw:(e,t,r,i)=>{e.fillStyle="#eee",e.fillRect(220,50,60,200);const o=i/50*180;e.fillStyle="red",e.fillRect(230,240-o,40,o),e.fillStyle="#333",e.font="20px Arial",e.fillText(i+"¬∞C",300,150)}}),ultrasonic:SimHelpers.createStandardSimulation({type:"slider",label:"Mesafe (cm)",min:0,max:200,onDraw:(e,t,r,i)=>{e.fillStyle="#ccc",e.fillRect(150,100,100,50);const o=150+i*2;o<480&&(e.fillStyle="red",e.fillRect(o,80,10,90)),e.fillStyle="#000",e.fillText(i+"cm",200,200)}}),servo:SimHelpers.createStandardSimulation({type:"slider",label:"A√ßƒ±",min:0,max:180,onDraw:(e,t,r,i)=>{e.fillStyle="#333",e.fillRect(200,150,60,40),e.save(),e.translate(230,150),e.rotate((i-90)*.0174),e.fillStyle="#ddd",e.fillRect(-5,-60,10,60),e.restore()}}),melody:SimHelpers.createStandardSimulation({type:"button",buttonText:"üéµ √áAL",onDraw:(e,t,r,i,o)=>{e.fillStyle="#333",e.fillRect(100,150,300,50),e.fillStyle="#111",e.beginPath(),e.arc(250,100,30,0,6.28),e.fill(),o&&r%500<250&&(e.strokeStyle="white",e.beginPath(),e.arc(250,100,40,0,6.28),e.stroke())}}),moisture:SimHelpers.createStandardSimulation({type:"slider",label:"Nem Seviyesi",min:0,max:1023,onDraw:(e,t,r,i)=>{SimHelpers.drawBarSensor(e,200,250,i,1023,"blue","Deƒüer")}}),motion:SimHelpers.createStandardSimulation({type:"button",buttonText:"üèÉ HAREKET OLU≈ûTUR",onDraw:(e,t,r,i,o)=>{e.fillStyle=o?"red":"#333",e.beginPath(),e.arc(250,120,40,0,6.28),e.fill(),e.fillStyle="white",e.fillText("PIR",235,125),o&&(e.strokeStyle="red",e.lineWidth=3,e.beginPath(),e.arc(250,120,60,0,6.28),e.stroke())}}),streetLight:SimHelpers.createStandardSimulation({type:"slider",label:"Ortam I≈üƒ±ƒüƒ±",min:0,max:1023,onDraw:(e,t,r,i)=>{const o=i/1023;SimHelpers.drawLamp(e,250,100,`rgba(255, 255, 100, ${1-o})`)}}),countdown:{setup:e=>{e.setControls('<button onclick="if(!app.simState.active){app.simState.active=true; app.simState.val1=9;}" class="w-full bg-red-600 text-white py-2 rounded">BA≈ûLAT</button>')},draw:(e,t,r)=>{SimHelpers.drawBoard(e,t.simState.themeColor||"#00979C"),t.simState.active&&r-(t.simState.lastTick||0)>1e3&&(t.simState.val1--,t.simState.lastTick=r,t.simState.val1<0&&(t.simState.active=!1));const i=t.simState.val1;e.fillStyle="red",e.font="80px monospace",e.fillText(i<0?"BOOM":i,200,200)}},flood:SimHelpers.createStandardSimulation({type:"slider",label:"Su Seviyesi",min:0,max:1023,onDraw:(e,t,r,i)=>{SimHelpers.drawBarSensor(e,200,250,i,1023,"blue","Su")}}),clap:SimHelpers.createStandardSimulation({type:"button",buttonText:"üëè ALKI≈ûLA",onDraw:(e,t,r,i,o)=>{e.fillStyle="#e91e63",e.beginPath(),e.arc(250,175,30,0,6.28),e.fill(),o?(e.strokeStyle="rgba(233,30,99,0.5)",e.lineWidth=10,e.stroke(),SimHelpers.drawLED(e,350,175,"green",!0)):SimHelpers.drawLED(e,350,175,"green",!1)}}),fire:SimHelpers.createStandardSimulation({type:"slider",label:"Sƒ±caklƒ±k",min:0,max:1023,onDraw:(e,t,r,i)=>{SimHelpers.drawBarSensor(e,200,250,i,1023,"orange","Temp"),i>600&&(e.fillStyle="red",e.font="30px Arial",e.fillText("YANGIN!",300,100))}}),theremin:SimHelpers.createStandardSimulation({type:"slider",label:"El Mesafesi",min:0,max:1023,onDraw:(e,t,r,i)=>{SimHelpers.drawBarSensor(e,200,250,i,1023,"purple","Freq")}}),hourglass:SimHelpers.createStandardSimulation({type:"info",label:'<label><input type="checkbox" onchange="app.simState.active=this.checked"> Ters √áevir</label>',onDraw:(e,t,r,i,o)=>{const a=o?1:0;e.save(),e.translate(250,175),e.rotate(a*3.14),e.fillStyle=t.simState.themeColor||"#00979C",e.fillRect(-100,-50,200,100),e.fillStyle="white",e.fillText("UNO",-20,0),e.restore()}}),radar:{setup:e=>{e.simState={angle:0,dir:2,val1:0},e.setControls('<div class="text-center text-xs">Radar Taramasƒ±</div>')},draw:(e,t,r)=>{t.simState.angle+=t.simState.dir,(t.simState.angle>180||t.simState.angle<0)&&(t.simState.dir*=-1),SimHelpers.drawBoard(e,t.simState.themeColor||"#00979C"),e.fillStyle="black",e.fillRect(100,50,300,250),e.strokeStyle="lime",e.beginPath(),e.moveTo(250,280);const i=(t.simState.angle+180)*.0174;e.lineTo(250+Math.cos(i)*200,280+Math.sin(i)*200),e.stroke(),e.fillStyle="rgba(0,255,0,0.2)",e.beginPath(),e.arc(250,280,200,3.14,0),e.fill()}},explorer_board:{setup:e=>{e.setControls(`
                <div class="flex justify-between items-center w-full px-2">
                    <span class="text-xs font-bold text-gray-600">üñ±Ô∏è Yakla≈ü: Tekerlek | Gez: S√ºr√ºkle</span>
                    <button id="fsBtn" class="bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-1 px-3 rounded text-xs transition">
                        ‚õ∂ B√ºy√ºt
                    </button>
                </div>
            `);const r=document.getElementById("fsBtn"),i=document.getElementById("sim-container"),o=document.getElementById("simCanvas");e.simState.resizeObserver&&e.simState.resizeObserver.disconnect();const a=()=>{const n=i.querySelector("#sim-content-area").getBoundingClientRect();o.width=n.width,o.height=n.height};e.simState.resizeObserver=new ResizeObserver(()=>{a()}),e.simState.resizeObserver.observe(i),a(),r.onclick=()=>{document.fullscreenElement?document.exitFullscreen():i.requestFullscreen().catch(n=>{console.warn(`Fullscreen error: ${n.message}`)})},document.onfullscreenchange=()=>{document.fullscreenElement?r.innerText="K√º√ß√ºlt":r.innerText="B√ºy√ºt"},e.simState.mouseX=0,e.simState.mouseY=0,e.simState.zoom=1,e.simState.panX=0,e.simState.panY=0,e.simState.isDragging=!1,e.simState.lastDragX=0,e.simState.lastDragY=0,e.simState.activeHotspots=e.currentProject.hotspots||[],e.arduinoImg||(e.arduinoImg=new Image),e.currentProject.circuitImage?e.currentProject.circuitImage.includes("/")?e.arduinoImg.src=e.currentProject.circuitImage:e.arduinoImg.src="img/"+e.currentProject.circuitImage:e.arduinoImg.src="img/arduino_tanitim.jpg",o.onmousemove=n=>{const s=o.getBoundingClientRect(),d=o.width/s.width,c=o.height/s.height,g=(n.clientX-s.left)*d,m=(n.clientY-s.top)*c;e.simState.isDragging&&(e.simState.panX+=g-e.simState.lastDragX,e.simState.panY+=m-e.simState.lastDragY),e.simState.mouseX=g,e.simState.mouseY=m,e.simState.lastDragX=g,e.simState.lastDragY=m},o.onmousedown=n=>{e.simState.isDragging=!0},o.onmouseup=n=>{e.simState.isDragging=!1},o.onmouseleave=n=>{e.simState.isDragging=!1},o.onwheel=n=>{n.preventDefault();const s=.1,d=n.deltaY<0?1:-1,c=Math.exp(d*s),g=(e.simState.mouseX-e.simState.panX)/e.simState.zoom,m=(e.simState.mouseY-e.simState.panY)/e.simState.zoom,f=Math.min(Math.max(e.simState.zoom*c,1),10);e.simState.panX=e.simState.mouseX-g*f,e.simState.panY=e.simState.mouseY-m*f,e.simState.zoom=f}},draw:(e,t,r)=>{const i=e.canvas.width,o=e.canvas.height,a=t.simState.themeColor||"#00979C";if(e.fillStyle="#eee",e.fillRect(0,0,i,o),t.arduinoImg&&t.arduinoImg.complete&&t.arduinoImg.naturalWidth>0){const d=Math.min(i/500,o/350),c=(i-500*d)/2,g=(o-350*d)/2;e.save(),e.translate(t.simState.panX,t.simState.panY),e.scale(t.simState.zoom,t.simState.zoom),e.translate(c,g),e.scale(d,d);const m=Math.min(500/t.arduinoImg.width,350/t.arduinoImg.height),f=t.arduinoImg.width*m,h=t.arduinoImg.height*m,u=(500-f)/2,p=(350-h)/2;e.drawImage(t.arduinoImg,u,p,f,h);const b=(t.simState.mouseX-t.simState.panX)/t.simState.zoom,S=(t.simState.mouseY-t.simState.panY)/t.simState.zoom,k=(b-c)/d,L=(S-g)/d;let y=null;if(t.simState.activeHotspots.forEach(l=>{const w=l.x+u,v=l.y+p;e.strokeStyle=SimHelpers.hexToRgba(a,.4),e.lineWidth=2/t.simState.zoom/d,e.beginPath();let _=!1;if(l.r){const I=Math.sqrt((k-w)**2+(L-v)**2);e.arc(w,v,l.r,0,6.28),_=I<l.r}else l.w&&l.h&&(e.rect(w,v,l.w,l.h),_=k>=w&&k<=w+l.w&&L>=v&&L<=v+l.h);e.stroke(),_&&(y=l)}),y){const l=y.x+u,w=y.y+p;e.fillStyle=SimHelpers.hexToRgba(a,.5),e.beginPath(),y.r?e.arc(l,w,y.r,0,6.28):y.w&&y.h&&e.rect(l,w,y.w,y.h),e.fill(),e.strokeStyle="white",e.lineWidth=3/t.simState.zoom/d,e.stroke()}if(e.restore(),y){let v=t.simState.mouseX+20,_=t.simState.mouseY+20;v+200>i&&(v=t.simState.mouseX-200-20),_+80>o&&(_=t.simState.mouseY-80-20),e.fillStyle="rgba(255, 255, 255, 0.95)",e.shadowBlur=10,e.shadowColor="rgba(0,0,0,0.3)",e.fillRect(v,_,200,80),e.shadowBlur=0,e.strokeStyle=a,e.lineWidth=1,e.strokeRect(v,_,200,80),e.fillStyle=a,e.font="bold 14px Arial",e.fillText(y.name,v+10,_+25),e.fillStyle="#333",e.font="12px Arial",e.fillText(y.desc,v+10,_+50,180)}}else e.fillStyle="#333",e.fillText("Resim Y√ºkleniyor...",200,175)}}};Simulations.explorer_ide=Simulations.explorer_board;Simulations.traffic_light=Simulations.traffic;Simulations.pot_led=Simulations.pot;Simulations.button_led=Simulations.button;Simulations.generic_sensor=Simulations.streetLight;window.Simulations=Simulations;const Assistant={isOpen:!1,currentStep:0,guidedMode:!1,rules:[{keywords:["merhaba","selam","naber","hey"],response:()=>`Merhaba! üëã Ben Yeti Asistan. ${Assistant.getContextGreeting()}`,priority:1},{keywords:["yardƒ±m","help","ne yapabilirim"],response:()=>Assistant.getHelpMessage(),priority:1},{keywords:["bu ders","≈üu an","hangi ders","neredeyim"],response:()=>Assistant.getCurrentLessonInfo(),priority:2},{keywords:["ipucu","hint","takƒ±ldƒ±m","anlamadƒ±m"],response:()=>Assistant.getContextualTip(),priority:2},{keywords:["kod","a√ßƒ±kla","nasƒ±l √ßalƒ±≈üƒ±yor"],response:()=>Assistant.explainCurrentCode(),priority:2},{keywords:["malzeme","devre","bile≈üen","ne lazƒ±m"],response:()=>Assistant.getMaterialsInfo(),priority:2},{keywords:["adƒ±m adƒ±m","rehber","ba≈üla","y√∂nlendir"],response:()=>(Assistant.startGuidedMode(),null),priority:3},{keywords:["led","lamba","ƒ±≈üƒ±k"],response:()=>"LED yakmak i√ßin <code>digitalWrite(pin, HIGH);</code> komutunu kullanmalƒ±sƒ±n. Ayrƒ±ca <code>pinMode(pin, OUTPUT);</code> ile pini √ßƒ±kƒ±≈ü yapmayƒ± unutma!",priority:0},{keywords:["d√∂ng√º","loop","for","while","tekrar"],response:()=>"D√∂ng√ºler bir i≈ülemi tekrar ettirmek i√ßin kullanƒ±lƒ±r. Arduino'da <code>void loop()</code> ana d√∂ng√ºd√ºr ve s√ºrekli √ßalƒ±≈üƒ±r. <code>for</code> d√∂ng√ºs√º belirli sayƒ±da tekrar i√ßin kullanƒ±lƒ±r.",priority:0},{keywords:["hata","error","√ßalƒ±≈ümƒ±yor","bozuk","sorun"],response:()=>"Kodunda bir sorun mu var? üêû Kodu buraya yapƒ±≈ütƒ±rƒ±rsan senin i√ßin kontrol edebilirim!<br><br>Yaygƒ±n hatalar:<br>‚Ä¢ Noktalƒ± virg√ºl (;) unutulmu≈ü<br>‚Ä¢ Parantez kapatƒ±lmamƒ±≈ü<br>‚Ä¢ Deƒüi≈üken tanƒ±mlanmamƒ±≈ü",priority:0},{keywords:["arduino","uno","nano","mega"],response:()=>"Arduino, elektronik projeleri yapmamƒ±zƒ± saƒülayan bir mikrodenetleyici kartƒ±dƒ±r. Sens√∂rleri okuyabilir, motorlarƒ± kontrol edebilir. En pop√ºler model Arduino Uno'dur.",priority:0},{keywords:["micro:bit","microbit","bbc"],response:()=>"Micro:bit, √ºzerinde LED ekran, butonlar ve sens√∂rler barƒ±ndƒ±ran k√º√ß√ºk bir bilgisayardƒ±r. MakeCode ile blok tabanlƒ± kodlanƒ±r.",priority:0},{keywords:["scratch","kukla","sprite"],response:()=>"Scratch ile kendi oyunlarƒ±nƒ± ve animasyonlarƒ±nƒ± yapabilirsin. Kuklalar (sprite) sahnede hareket eder.",priority:0},{keywords:["mblock","panda"],response:()=>"mBlock, Scratch tabanlƒ± bir programdƒ±r. Bloklarƒ± s√ºr√ºkle-bƒ±rak yaparak Arduino'yu kodlayabilirsin!",priority:0},{keywords:["sens√∂r","mesafe","sƒ±caklƒ±k","hc-sr04","dht11"],response:()=>"Sens√∂rler √ßevreyi algƒ±lar:<br>‚Ä¢ <strong>HC-SR04:</strong> Mesafe √∂l√ßer<br>‚Ä¢ <strong>DHT11:</strong> Sƒ±caklƒ±k ve Nem √∂l√ßer<br>‚Ä¢ <strong>LDR:</strong> I≈üƒ±k seviyesi √∂l√ßer",priority:0},{keywords:["servo","motor"],response:()=>"Servo motorlar belirli bir a√ßƒ±ya (0-180 derece) d√∂nebilen motorlardƒ±r. Robot kol veya bariyer yapƒ±mƒ±nda kullanƒ±lƒ±r.",priority:0},{keywords:["te≈üekk√ºr","saƒüol","eyvallah"],response:()=>"Rica ederim! üòä Ba≈üka sorun olursa yardƒ±mcƒ± olmaktan mutluluk duyarƒ±m. üèîÔ∏è",priority:1}],guidedSteps:{default:[{message:"Ho≈ü geldin! üèîÔ∏è Seni bu derste adƒ±m adƒ±m y√∂nlendireceƒüim. Hazƒ±r mƒ±sƒ±n?",options:["Evet, ba≈ülayalƒ±m!","Dersi anlat"]},{message:"ƒ∞lk adƒ±m: <strong>G√∂revi oku</strong>. Bu derste ne yapacaƒüƒ±mƒ±zƒ± anlamalƒ±yƒ±z.",options:["Okudum, devam","G√∂revi g√∂ster"]},{message:"ƒ∞kinci adƒ±m: <strong>Malzemeleri hazƒ±rla</strong>. Gerekli par√ßalar masanda mƒ±?",options:["Hazƒ±r!","Malzemeleri g√∂ster"]},{message:"√ú√ß√ºnc√º adƒ±m: <strong>Devreyi kur</strong>. Baƒülantƒ± ≈üemasƒ±na g√∂re kablolarƒ± baƒüla.",options:["Kurdum","≈ûemayƒ± g√∂ster"]},{message:"D√∂rd√ºnc√º adƒ±m: <strong>Kodu y√ºkle</strong>. Kodu Arduino'ya y√ºkle ve test et.",options:["√áalƒ±≈ütƒ±! üéâ","Hata aldƒ±m"]},{message:"Harika! üéâ Dersi tamamladƒ±n! ≈ûimdi meydan okumayƒ± dene veya teste ge√ß.",options:["Testi √ß√∂z","Meydan okumayƒ± g√∂ster"]}]},isAdminContext:()=>{const e=window.location.hash;return!!(e.startsWith("#/admin")||e.includes("/admin")||window.location.pathname.includes("admin.html"))},init:()=>{Assistant.renderUI(),Assistant.checkRouteVisibility(),window.addEventListener("hashchange",()=>Assistant.checkRouteVisibility()),window.addEventListener("popstate",()=>Assistant.checkRouteVisibility()),window.addEventListener("route-changed",()=>Assistant.checkRouteVisibility())},checkRouteVisibility:()=>{Assistant.checkRouteTimer&&clearTimeout(Assistant.checkRouteTimer),Assistant.checkRouteTimer=setTimeout(()=>{Assistant._performRouteCheck()},100)},_performRouteCheck:()=>{const e=document.getElementById("chat-btn"),t=document.getElementById("chat-window"),r=document.getElementById("chat-notification");if(!e||!t)return;Assistant.isAdminContext()?(e.classList.add("hidden"),t.classList.add("hidden"),r&&r.classList.add("hidden"),Assistant.isOpen=!1):e.classList.remove("hidden")},renderUI:()=>{const e=document.createElement("div");e.id="assistant-container",e.innerHTML=`
            <!-- Chat Button with Notification Dot (positioned higher on mobile) -->
            <button id="chat-btn" onclick="Assistant.toggle()" 
                class="fixed bottom-24 md:bottom-4 right-4 w-20 md:w-32 h-auto transform hover:scale-110 active:scale-95 transition z-40 drop-shadow-2xl cursor-pointer hover:drop-shadow-3xl animate-gentle-bounce"
                style="filter: drop-shadow(0 0 15px rgba(0, 151, 156, 0.4));">
                <div class="notification-dot"></div>
                <img src="img/yeti-ask.png" class="w-full h-full object-contain filter drop-shadow-lg" alt="Bana Sor">
                <span class="absolute -bottom-1 left-1/2 -translate-x-1/2 bg-gradient-to-r from-[#FF8C00] to-[#FF4500] text-white text-xs md:text-sm font-bold px-3 py-1.5 rounded-full shadow-lg shadow-orange-500/40 whitespace-nowrap">BANA SOR</span>
            </button>

            <!-- Chat Window -->
            <div id="chat-window" class="fixed bottom-24 right-6 w-80 md:w-96 bg-white dark:bg-slate-800 rounded-2xl shadow-2xl border border-gray-200 dark:border-slate-700 hidden flex flex-col z-50 transform transition-all origin-bottom-right scale-95 opacity-0" 
                 style="height: 520px; max-height: 80vh;">
                <!-- Header -->
                <div class="bg-gradient-to-r from-teal-500 to-teal-600 text-white p-4 rounded-t-2xl flex justify-between items-center">
                    <div class="flex items-center">
                         <img src="img/yeti-peek.png" class="w-10 h-10 object-contain mr-2 bg-white/10 rounded-full p-1">
                        <div>
                            <h3 class="font-bold">Yeti Asistan</h3>
                            <p class="text-xs text-teal-100" id="assistant-status">Sana yardƒ±mcƒ± olmaya hazƒ±rƒ±m</p>
                        </div>
                    </div>
                    <button onclick="Assistant.toggle()" class="text-white hover:bg-white/20 rounded p-1">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                    </button>
                </div>

                <!-- Context Bar (shows current lesson) -->
                <div id="context-bar" class="bg-teal-50 px-4 py-2 text-xs text-teal-700 border-b hidden">
                    <span id="context-text">üìö Ders se√ßilmedi</span>
                </div>

                <!-- Messages Area -->
                <div id="chat-messages" class="flex-grow overflow-y-auto p-4 space-y-3 bg-gray-50 text-sm">
                    <!-- Welcome message will be added dynamically -->
                </div>

                <!-- Quick Actions -->
                <div id="quick-actions" class="px-3 py-2 bg-white border-t flex flex-wrap gap-2">
                </div>

                <!-- Input Area -->
                <div class="p-3 bg-white border-t rounded-b-2xl">
                    <div class="flex gap-2">
                        <input type="text" id="chat-input" placeholder="Bir ≈üeyler yaz veya soru sor..." 
                            class="flex-grow p-2 border border-gray-300 rounded-lg focus:outline-none focus:border-teal-500 focus:ring-1 focus:ring-teal-500 text-sm"
                            onkeypress="if(event.key === 'Enter') Assistant.sendMessage()">
                        <button onclick="Assistant.sendMessage()" class="bg-teal-500 text-white p-2 rounded-lg hover:bg-teal-600 transition">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path></svg>
                        </button>
                    </div>
                </div>
            </div>
        `,document.body.appendChild(e);const t=document.createElement("style");t.textContent=`
            @keyframes pulse-glow {
                0%, 100% { filter: drop-shadow(0 0 2px rgba(0, 151, 156, 0.5)); transform: scale(1); }
                50% { filter: drop-shadow(0 0 10px rgba(0, 151, 156, 0.8)); transform: scale(1.05); }
            }
        `,document.head.appendChild(t)},toggle:()=>{Assistant.isOpen=!Assistant.isOpen;const e=document.getElementById("chat-window"),t=document.getElementById("chat-btn");Assistant.isOpen?(e.classList.remove("hidden","scale-95","opacity-0"),e.classList.add("scale-100","opacity-100"),t.classList.add("hidden"),Assistant.updateContext(),document.getElementById("chat-messages").children.length===0&&Assistant.showWelcome(),setTimeout(()=>document.getElementById("chat-input").focus(),100)):(e.classList.add("hidden","scale-95","opacity-0"),e.classList.remove("scale-100","opacity-100"),t.classList.remove("hidden"))},updateContext:()=>{const e=document.getElementById("context-bar"),t=document.getElementById("context-text"),r=document.getElementById("assistant-status"),i=window.app?.currentProject,o=window.app?.currentCourseKey;if(i)e.classList.remove("hidden"),t.innerHTML=`üìö <strong>${i.title}</strong> ${i.icon||""}`,r.textContent=`${i.title} dersinde yardƒ±mcƒ±yƒ±m`;else if(o){e.classList.remove("hidden");const a={arduino:"Arduino",microbit:"Micro:bit",scratch:"Scratch",mblock:"mBlock",appinventor:"App Inventor"};t.innerHTML=`üìö ${a[o]||o} Kursu`,r.textContent="Ders se√ßmeni bekliyorum"}else e.classList.add("hidden"),r.textContent="Sana yardƒ±mcƒ± olmaya hazƒ±rƒ±m";Assistant.updateQuickActions()},updateQuickActions:()=>{const e=document.getElementById("quick-actions"),t=window.app?.currentProject;let r=[];t?r=[{label:"üí° ƒ∞pucu",action:"Assistant.setUserInput('ƒ∞pucu ver')"},{label:"üîß Kodu A√ßƒ±kla",action:"Assistant.setUserInput('Kodu a√ßƒ±kla')"},{label:"üì¶ Malzemeler",action:"Assistant.setUserInput('Malzemeler neler?')"},{label:"üéØ Rehber Ba≈ülat",action:"Assistant.startGuidedMode()"}]:r=[{label:"üëã Merhaba",action:"Assistant.setUserInput('Merhaba')"},{label:"‚ùì Yardƒ±m",action:"Assistant.setUserInput('Yardƒ±m')"},{label:"‚ö° Arduino Nedir?",action:"Assistant.setUserInput('Arduino nedir?')"}],e.innerHTML=r.map(i=>`<button onclick="${i.action}" class="bg-white border border-teal-300 text-teal-700 px-3 py-1 rounded-full text-xs hover:bg-teal-500 hover:text-white transition">${i.label}</button>`).join("")},showWelcome:()=>{const e=window.app?.currentProject;e?Assistant.addMessage(`Merhaba! üëã <strong>${e.title}</strong> dersinde sana yardƒ±mcƒ± olacaƒüƒ±m.<br><br>A≈üaƒüƒ±daki butonlarƒ± kullanabilir veya soru sorabilirsin!`):Assistant.addMessage("Merhaba! üëã Ben <strong>Yeti Asistan</strong>. Kodlama ve robotik konularƒ±nda sana yardƒ±mcƒ± olabilirim.<br><br>Bir ders se√ßtiƒüinde sana √∂zel ipu√ßlarƒ± verebilirim!")},getContextGreeting:()=>{const e=window.app?.currentProject;return e?`<strong>${e.title}</strong> dersinde sana yardƒ±mcƒ± olabilirim. Ne sormak istersin?`:"Sana nasƒ±l yardƒ±mcƒ± olabilirim?"},getHelpMessage:()=>{const e=window.app?.currentProject;let t="ƒ∞≈üte yapabileceklerim:<br><ul class='list-disc pl-4 mt-2'>";return t+="<li>Dersleri adƒ±m adƒ±m anlatmak</li>",t+="<li>Kodunu kontrol etmek</li>",t+="<li>ƒ∞pucu ve √∂neriler vermek</li>",t+="<li>Hatalarƒ± a√ßƒ±klamak</li>",t+="</ul>",e&&(t+=`<br>≈ûu an <strong>${e.title}</strong> dersinde olduƒüunu g√∂r√ºyorum. √ñzel yardƒ±m i√ßin 'ipucu' veya 'rehber ba≈ülat' yazabilirsin!`),t},getCurrentLessonInfo:()=>{const e=window.app?.currentProject;return e?`
            <strong>${e.icon} ${e.title}</strong><br><br>
            <strong>G√∂rev:</strong> ${e.mission}<br><br>
            <strong>Teori:</strong> ${e.theory?.substring(0,150)}...
        `:"Hen√ºz bir ders se√ßmedin. Ana sayfadan bir kurs ve ders se√ß, sonra sana yardƒ±mcƒ± olabilirim!"},getContextualTip:()=>{const e=window.app?.currentProject;if(!e)return"Bir ders se√ßersen sana √∂zel ipu√ßlarƒ± verebilirim! üí°";const t={arduino:["üí° Kodu y√ºklemeden √∂nce 'Doƒürula' butonuna bas, hatalarƒ± √∂nceden yakala!","üí° LED yanmƒ±yorsa, uzun bacaƒüƒ±n (+) pinde olduƒüundan emin ol.","üí° Seri Port Ekranƒ±'nƒ± a√ß (Ctrl+Shift+M) ve sens√∂r deƒüerlerini izle.","üí° delay() yerine millis() kullanarak √ßoklu g√∂rev yapabilirsin."],microbit:["üí° LED'ler aynƒ± zamanda ƒ±≈üƒ±k sens√∂r√º olarak √ßalƒ±≈üƒ±r!","üí° A+B butonlarƒ±na aynƒ± anda basmayƒ± dene.","üí° Radyo ile arkada≈üƒ±nla mesajla≈üabilirsin!","üí° Pusula kullanmadan √∂nce kart kalibre edilmeli."],scratch:["üí° Kuklayƒ± klonlayarak √ßok sayƒ±da karakter olu≈üturabilirsin.","üí° 'Haber sal' bloƒüu ile kuklalar birbiriyle haberle≈üebilir.","üí° Animasyon i√ßin kost√ºmleri hƒ±zlƒ±ca deƒüi≈ütir.","üí° Deƒüi≈ükenleri 'Sadece bu kukla i√ßin' yaparak baƒüƒ±msƒ±z kontrol saƒüla."],mblock:["üí° mBlock'ta hem sahnedeki Panda'yƒ± hem Arduino'yu kodlayabilirsin.","üí° Uzantƒ±lar b√∂l√ºm√ºnden ek sens√∂r bloklarƒ± ekleyebilirsin.","üí° 'Canlƒ± Mod'da kodu y√ºklemeden test edebilirsin.","üí° Sayƒ±sal pin okuma 0 veya 1 d√∂ner, analog 0-1023 arasƒ±."],appinventor:["üí° TinyDB ile verileri kalƒ±cƒ± olarak kaydedebilirsin.","üí° Canvas √ºzerinde Ball ve ImageSprite ile oyun yapabilirsin.","üí° Telefonu salla algƒ±lamak i√ßin AccelerometerSensor kullan.","üí° Blok edit√∂r√ºnde saƒü tƒ±k ile kodu kopyalayabilirsin."]},r=window.app?.currentCourseKey||"arduino",i=t[r]||t.arduino,o=i[Math.floor(Math.random()*i.length)];let a=`<strong>${e.title}</strong> i√ßin ipucu:<br><br>${o}`;return e.challenge&&(a+=`<br><br>üèÜ <strong>Meydan Okuma:</strong> ${e.challenge}`),a},explainCurrentCode:()=>{const e=window.app?.currentProject;if(!e||!e.code)return"≈ûu anki derste g√∂sterilecek kod yok. Kod i√ßeren bir ders se√ß!";if(e.code.match(/\.(jpeg|jpg|gif|png)$/)!=null)return"Bu derste blok tabanlƒ± kod kullanƒ±lƒ±yor. Resmi inceleyerek bloklarƒ±n ne yaptƒ±ƒüƒ±nƒ± anlayabilirsin!";const t=e.code;let r="<strong>üîß Kod A√ßƒ±klamasƒ±:</strong><br><br>";return t.includes("pinMode")&&(r+="‚Ä¢ <code>pinMode(pin, OUTPUT/INPUT)</code>: Pini giri≈ü veya √ßƒ±kƒ±≈ü olarak ayarlar.<br>"),t.includes("digitalWrite")&&(r+="‚Ä¢ <code>digitalWrite(pin, HIGH/LOW)</code>: Pine elektrik verir veya keser.<br>"),t.includes("digitalRead")&&(r+="‚Ä¢ <code>digitalRead(pin)</code>: Pinin durumunu okur (1 veya 0).<br>"),t.includes("analogRead")&&(r+="‚Ä¢ <code>analogRead(pin)</code>: Analog deƒüer okur (0-1023).<br>"),t.includes("analogWrite")&&(r+="‚Ä¢ <code>analogWrite(pin, deƒüer)</code>: PWM ile parlaklƒ±k/hƒ±z ayarlar (0-255).<br>"),t.includes("delay")&&(r+="‚Ä¢ <code>delay(ms)</code>: Belirtilen milisaniye kadar bekler.<br>"),t.includes("Serial")&&(r+="‚Ä¢ <code>Serial.begin/print</code>: Bilgisayarla haberle≈üme i√ßin.<br>"),t.includes("Servo")&&(r+="‚Ä¢ <code>Servo</code>: Servo motorlarƒ± kontrol etmek i√ßin k√ºt√ºphane.<br>"),r+="<br><em>Tam kodu g√∂rmek i√ßin 'Kod' sekmesine ge√ß!</em>",r},getMaterialsInfo:()=>{const e=window.app?.currentProject;if(!e||!e.materials||e.materials.length===0)return"Bu derste √∂zel malzeme listesi yok.";let t=`<strong>üì¶ ${e.title} i√ßin gereken malzemeler:</strong><br><br>`;return t+="<ul class='list-disc pl-4'>",e.materials.forEach(r=>{t+=`<li>${r}</li>`}),t+="</ul>",e.circuit_desc&&(t+=`<br><strong>Baƒülantƒ±:</strong> ${e.circuit_desc}`),t},startGuidedMode:()=>{if(!window.app?.currentProject){Assistant.addMessage("Rehber modu i√ßin √∂nce bir ders se√ßmelisin! Ana sayfadan bir ders se√ß.");return}Assistant.guidedMode=!0,Assistant.currentStep=0,Assistant.addMessage("üéØ <strong>Rehber Modu Ba≈üladƒ±!</strong><br><br>Seni bu derste adƒ±m adƒ±m y√∂nlendireceƒüim."),setTimeout(()=>Assistant.showGuidedStep(),500)},showGuidedStep:()=>{const t=Assistant.guidedSteps.default[Assistant.currentStep];if(!t){Assistant.guidedMode=!1,Assistant.addMessage("üéâ <strong>Tebrikler!</strong> Rehberi tamamladƒ±n. Ba≈üka sorun varsa yardƒ±mcƒ± olmaya hazƒ±rƒ±m!");return}const r=document.getElementById("chat-messages"),i=document.createElement("div");i.className="flex items-start",i.innerHTML=`
            <div class="bg-white p-3 rounded-2xl rounded-tl-none shadow-sm border border-teal-200 max-w-[90%]">
                <div class="text-teal-600 text-xs font-bold mb-1">ADIM ${Assistant.currentStep+1}/${Assistant.guidedSteps.default.length}</div>
                ${t.message}
                <div class="flex flex-wrap gap-2 mt-3">
                    ${t.options.map((o,a)=>`<button onclick="Assistant.handleGuidedOption(${a}, '${o}')" class="bg-teal-500 text-white px-3 py-1 rounded-full text-xs hover:bg-teal-600 transition">${o}</button>`).join("")}
                </div>
            </div>
        `,r.appendChild(i),r.scrollTop=r.scrollHeight},handleGuidedOption:(e,t)=>{Assistant.addMessage(t,"user");const r=window.app?.currentProject;if(t.includes("G√∂revi g√∂ster")&&r)Assistant.addMessage(`<strong>G√∂rev:</strong> ${r.mission}`);else if(t.includes("Malzemeleri g√∂ster")&&r)Assistant.addMessage(Assistant.getMaterialsInfo());else if(t.includes("≈ûemayƒ± g√∂ster"))Assistant.addMessage("Devre ≈üemasƒ±nƒ± g√∂rmek i√ßin <strong>Devre</strong> sekmesine tƒ±kla!");else if(t.includes("Hata aldƒ±m")){Assistant.addMessage("Hata mesajƒ±nƒ± buraya yapƒ±≈ütƒ±r, birlikte √ß√∂zelim! üêû");return}else t.includes("Testi √ß√∂z")?Assistant.addMessage("Test i√ßin <strong>Test</strong> sekmesine ge√ß. Ba≈üarƒ±lar! üìù"):t.includes("Meydan okumayƒ± g√∂ster")&&r?.challenge&&Assistant.addMessage(`üèÜ <strong>Meydan Okuma:</strong><br><br>${r.challenge}`);Assistant.currentStep++,setTimeout(()=>Assistant.showGuidedStep(),800)},addMessage:(e,t="bot")=>{if(!e)return;const r=document.getElementById("chat-messages"),i=document.createElement("div");i.className=`flex ${t==="user"?"justify-end":"items-start"}`;const o=document.createElement("div");o.className=t==="user"?"bg-teal-500 text-white p-3 rounded-2xl rounded-tr-none shadow-sm max-w-[85%]":"bg-white p-3 rounded-2xl rounded-tl-none shadow-sm border border-gray-100 max-w-[85%]",o.innerHTML=e,i.appendChild(o),r.appendChild(i),r.scrollTop=r.scrollHeight},setUserInput:e=>{const t=document.getElementById("chat-input");t.value=e,Assistant.sendMessage()},sendMessage:()=>{const e=document.getElementById("chat-input"),t=e.value.trim();if(!t)return;Assistant.addMessage(t,"user"),e.value="",Assistant.guidedMode&&!t.toLowerCase().includes("devam")&&(Assistant.guidedMode=!1);const r="thinking-"+Date.now(),i=document.getElementById("chat-messages");i.innerHTML+=`<div id="${r}" class="flex items-start"><div class="bg-gray-100 p-3 rounded-2xl rounded-tl-none text-xs text-gray-500">D√º≈ü√ºn√ºyor...</div></div>`,i.scrollTop=i.scrollHeight,setTimeout(()=>{const o=document.getElementById(r);if(o&&o.remove(),Assistant.isCode(t)){const a=Assistant.analyzeCode(t);Assistant.addMessage(a)}else{const a=Assistant.findResponse(t);a&&Assistant.addMessage(a)}},600)},isCode:e=>e.includes(";")&&e.includes("(")||e.includes("{")||e.includes("void ")||e.includes("int ")||e.includes("#include"),analyzeCode:e=>{const t=[];e.split(`
`).forEach((s,d)=>{const c=s.trim();c&&!c.startsWith("//")&&!c.startsWith("#")&&!c.endsWith("{")&&!c.endsWith("}")&&!c.endsWith(";")&&c.length>3&&!c.startsWith("*")&&t.push(`Satƒ±r ${d+1}: Noktalƒ± virg√ºl (;) eksik olabilir.`)});const i=(e.match(/{/g)||[]).length,o=(e.match(/}/g)||[]).length;i!==o&&t.push(`Parantez hatasƒ±: ${i} adet '{' var ama ${o} adet '}' var.`);const a=(e.match(/\(/g)||[]).length,n=(e.match(/\)/g)||[]).length;return a!==n&&t.push(`Parantez hatasƒ±: ${a} adet '(' var ama ${n} adet ')' var.`),t.length>0?`<strong>üêû Bulduƒüum sorunlar:</strong><br><ul class='list-disc pl-4 mt-2'>${t.map(s=>`<li>${s}</li>`).join("")}</ul><br>Bunlarƒ± kontrol et ve tekrar dene!`:"‚úÖ Kodun yapƒ±sal olarak d√ºzg√ºn g√∂r√ºn√ºyor! Mantƒ±k hatasƒ± olup olmadƒ±ƒüƒ±nƒ± g√∂rmek i√ßin √ßalƒ±≈ütƒ±rƒ±p test etmelisin."},findResponse:e=>{const t=e.toLowerCase(),i=[...Assistant.rules].sort((o,a)=>(a.priority||0)-(o.priority||0)).find(o=>o.keywords.some(a=>t.includes(a)));return i?typeof i.response=="function"?i.response():i.response:"Bunu tam anlayamadƒ±m üòï ≈ûunlarƒ± deneyebilirsin:<br>‚Ä¢ 'ƒ∞pucu ver'<br>‚Ä¢ 'Kodu a√ßƒ±kla'<br>‚Ä¢ 'Rehber ba≈ülat'<br>‚Ä¢ Veya hatalƒ± kodunu yapƒ±≈ütƒ±r."}};window.Assistant=Assistant;const createStateProxy=()=>window.StateProxy?.create?window.StateProxy.create():(console.warn("[App] StateProxy module not loaded, using fallback"),{currentCourseKey:null,componentInfo:{},phases:[],projects:[]}),app$1={get state(){return this._stateProxy||(this._stateProxy=createStateProxy()),this._stateProxy},currentProject:null,get chartInstance(){return window.SimController?.chartInstance||null},get simLoop(){return window.SimController?.loop||null},get simState(){return window.SimController?.state||{val1:0,val2:0,active:!1,timer:0,angle:0,dir:2,lastTick:Date.now()}},lastFrameTime:0,targetFPS:30,stopSimulation:()=>{if(window.SimController?.stop)return window.SimController.stop();app$1.simLoop&&cancelAnimationFrame(app$1.simLoop)},progress:{get data(){return window.Progress?.data||{}},load:()=>window.Progress?.load(),save:()=>window.Progress?.save(),toggle:e=>window.Progress?.toggle(e),isComplete:e=>window.Progress?.isComplete(e)||!1,getCompletionRate:e=>window.Progress?.getRate(e)||0},init:async()=>{if(window.logout=app$1.logout,typeof courseData<"u"){if(window.ScrollManager&&window.ScrollManager.init(),await app$1.initAuth(),window.Progress&&(window.Progress.onUpdate=e=>{app$1.renderProgressBar();const t=document.getElementById("btn-complete-project");if(t){const r=app$1.progress.isComplete(e);t.innerHTML=r?"‚úÖ Tamamlandƒ±":"Dersi Tamamla",t.className=r?"mt-8 w-full py-4 bg-green-500 text-white rounded-xl shadow-lg font-bold text-xl hover:bg-green-600 transition transform hover:scale-105 active:scale-95":"mt-8 w-full py-4 bg-gray-200 text-gray-600 rounded-xl shadow-lg font-bold text-xl hover:bg-green-500 hover:text-white transition transform hover:scale-105 active:scale-95"}}),window.Search?.init(app$1.selectCourse,app$1.loadProject),window.Assistant?.init(),window.MainLayout)try{window.MainLayout.init()}catch(e){console.error("MainLayout init error:",e)}window.ViewManager&&window.ViewManager.init("main-content"),window.CourseLoader?.init?(app$1.renderCourseSelection(),CourseLoader.init().then(()=>{app$1.restoreFromLocalStorage(),app$1.renderCourseSelection(),window.Router&&window.Router.init(app$1)}).catch(e=>{console.warn("[App] Course init warning (using static manifest):",e)})):app$1.renderCourseSelection()}else UI.showError("course-list","Veri Y√ºklenemedi","window.location.reload()");Performance.measure("App Init","app_start")},initAuth:async()=>{window.AuthUI?await window.AuthUI.init():console.error("[App] AuthUI module not found")},updateUserUI:e=>{window.AuthUI&&window.AuthUI.updateUserUI(e)},toggleUserMenu:()=>{window.AuthUI&&window.AuthUI.toggleUserMenu()},closeUserMenu:e=>{window.AuthUI&&window.AuthUI.closeUserMenu(e)},logout:()=>{window.AuthUI&&window.AuthUI.logout()},globalLogout:()=>app$1.logout(),restoreFromLocalStorage:()=>window.LocalStorageManager?.restoreFromLocalStorage?window.LocalStorageManager.restoreFromLocalStorage():(console.warn("[App] LocalStorageManager module not loaded"),0),toggleMobileSearch:()=>UI.toggleMobileSearch(),toggleSidebar:()=>UI.toggleSidebar(),setTheme:e=>{window.ThemeManager&&window.ThemeManager.setTheme(e)},getCurrentTheme:()=>window.ThemeManager?window.ThemeManager.getCurrentTheme():"light",toggleLanguage:()=>{const t=(Settings.get("language")||"tr")==="tr"?"en":"tr";Settings.set("language",t),window.location.reload()},handleLegacyRoute:async(e,t)=>{switch(console.log(`[App] Legacy Route: ${e}`,t),window.ViewManager?.getCurrentView?.()&&(console.log("[App] Switching to legacy view, unmounting SPA view..."),ViewManager.unmountCurrent()),e){case"home":window.CourseLoader?.init&&await CourseLoader.init(),app$1.renderCourseSelection(!1);break;case"course":t.key&&(app$1.state.currentCourseKey!==t.key?await app$1.selectCourse(t.key,null,!1):UI.switchView("dashboard-view"));break;case"project":if(t.key&&t.id){app$1.state.currentCourseKey!==t.key&&await app$1.selectCourse(t.key,null,!1);const i=parseInt(t.id);isNaN(i)||app$1.loadProject(i,!1)}break;default:console.warn(`[App] Unknown legacy route: ${e}`),app$1.renderCourseSelection(!1)}},renderCourseSelection:(e=!0)=>{const t=window.CourseLoader?.getManifest()||{},r=document.getElementById("dashboard-view"),i=document.getElementById("project-view");r&&r.classList.add("hidden"),i&&i.classList.add("hidden"),app$1.stopSimulation(),app$1.currentProject=null,UI.renderCourseSelection(t),window.Router&&e&&window.Router.updateUrl(null,null)},selectCourse:async(e,t,r=!0)=>{const i=`select-course-${e}`;if(UI.isLoading(i))return;UI.setActionLoading(i,!0);let o=null;t?.target?o=t.target.closest(".course-card"):o=document.querySelector(`[onclick*="selectCourse('${e}')"]`),o&&UI.setCardLoading(o,!0);try{await window.CourseLoader?.loadCourse(e),app$1.state.currentCourseKey=e,window._appState&&(window._appState.currentCourseKey=e);const a=courseData[e];if(!a)throw new Error("Course data not found after loading");window.applyTheme&&window.applyTheme(e),app$1.state.componentInfo=a.data.componentInfo||{},app$1.state.phases=a.data.phases||[],app$1.state.projects=a.data.projects||[],document.getElementById("course-title").innerText=a.title,document.getElementById("course-desc").innerText=a.description,app$1.renderDashboard(),app$1.renderSidebar(),app$1.renderProgressBar(),window.Router&&r&&window.Router.updateUrl(e,null),window.Store&&window.Store.setCurrentCourse(a,e)}catch(a){console.error("[App] Failed to load course:",a),Toast?.errorWithRetry("Kurs y√ºklenemedi!",()=>app$1.selectCourse(e)),UI.showError("course-list","Kurs y√ºklenemedi!","app.renderCourseSelection()")}finally{UI.setActionLoading(i,!1),o&&UI.setCardLoading(o,!1)}},renderProgressBar:()=>{const{currentCourseKey:e}=app$1.state,t=app$1.progress.getCompletionRate(e);UI.renderProgressBar(t)},renderDashboard:()=>{const{phases:e,projects:t}=app$1.state;UI.renderDashboard(e,t,app$1.progress),app$1.stopSimulation(),window.Router&&app$1.state.currentCourseKey&&window.Router.updateUrl(app$1.state.currentCourseKey,null)},loadProject:(e,t=!0)=>{const r=`load-project-${e}`;if(UI.isLoading(r))return;UI.setActionLoading(r,!0);const{projects:i}=app$1.state,o=i.find(f=>f.id===e);if(!o){console.error(`Project not found: ${e}`),alert("Ders bulunamadƒ±!"),app$1.renderDashboard(),UI.setActionLoading(r,!1);return}app$1.currentProject=o,window.Store&&window.Store.setState({activeProject:o}),UI.switchView?UI.switchView("project-view"):(document.getElementById("dashboard-view").classList.add("hidden"),document.getElementById("project-view").classList.remove("hidden")),document.getElementById("project-tag").innerText=o.phase===0?"Hazƒ±rlƒ±k":`Ders ${o.id}`,document.getElementById("project-title").innerText=o.title,document.getElementById("project-desc").innerText=o.desc,document.getElementById("project-icon").innerText=o.icon,["simCanvas","interactive-area","interactive-info","chart-card","video-container"].forEach(f=>{const h=document.getElementById(f);h&&h.classList.add("hidden")}),document.getElementById("simControls").innerHTML="";const a=o.youtubeUrl&&o.youtubeUrl.trim(),n=o.hasSim!==!1&&o.simType&&o.simType!=="none",s=o.showHotspotsInLab&&o.hotspots&&o.hotspots.length>0,d=document.getElementById("video-container"),c=document.getElementById("video-iframe");if(a&&d&&c){const f=UI.extractYouTubeId(o.youtubeUrl);f&&(c.src=`https://www.youtube.com/embed/${f}`,d.classList.remove("hidden"))}const g=document.getElementById("sim-container"),m=document.getElementById("simCanvas");s?(g.classList.remove("hidden"),m.classList.add("hidden"),UI.setupCustomHotspots(o)):n?(g.classList.remove("hidden"),m.classList.remove("hidden"),app$1.setupSimulation(o.simType)):a?g.classList.add("hidden"):(g.classList.remove("hidden"),m.classList.add("hidden")),o.hasGraph&&document.getElementById("chart-card").classList.remove("hidden"),app$1.renderTabs(o),window.scrollTo(0,0),window.Router&&t&&window.Router.updateUrl(app$1.state.currentCourseKey,e),setTimeout(()=>UI.setActionLoading(r,!1),100)},setupExplorer:e=>{e==="explorer_board"?UI.setupInteractiveArea(`
                <div class="relative w-full h-full bg-gray-100 flex items-center justify-center">
                    <img src="img/arduino_tanitim.jpg" class="max-h-full max-w-full object-contain" onerror="this.parentElement.innerHTML='<div class=\\'text-center p-4\\'>G√∂rsel Yok: img/arduino_tanitim.jpg<br>Arduino fotoƒürafƒ±nƒ± bu isimle ekleyin.</div>'">
                    <div class="hotspot" style="top:20%; left:10%;" title="USB Port" onmouseover="UI.showInfo('USB Portu: Kod y√ºkler ve g√º√ß verir.')"></div>
                    <div class="hotspot" style="top:75%; left:10%;" title="G√º√ß" onmouseover="UI.showInfo('G√º√ß Giri≈üi: Pil veya adapt√∂r takƒ±lƒ±r.')"></div>
                    <div class="hotspot" style="top:10%; right:20%;" title="Dijital" onmouseover="UI.showInfo('Dijital Pinler: LED yakmak i√ßin kullanƒ±lƒ±r.')"></div>
                    <div class="hotspot" style="bottom:10%; right:30%;" title="Analog" onmouseover="UI.showInfo('Analog Pinler: Sens√∂r okumak i√ßin kullanƒ±lƒ±r.')"></div>
                    <div class="hotspot" style="top:60%; left:45%;" title="√áip" onmouseover="UI.showInfo('Mikrodenetleyici: Arduino\\'nun beyni.')"></div>
                </div>`):UI.setupInteractiveArea(`
                <div class="relative w-full h-full bg-gray-800 flex items-center justify-center">
                    <img src="img/ide_tanitim.jpg" class="max-h-full max-w-full object-contain" onerror="this.parentElement.innerHTML='<div class=\\'text-center p-4 text-white\\'>G√∂rsel Yok: img/ide_tanitim.jpg<br>IDE ekran g√∂r√ºnt√ºs√ºn√º ekleyin.</div>'">
                    <div class="hotspot" style="top:5%; left:5%;" title="Kontrol" onmouseover="UI.showInfo('Kontrol Et: Koddaki hatalarƒ± bulur.')"></div>
                    <div class="hotspot" style="top:5%; left:12%;" title="Y√ºkle" onmouseover="UI.showInfo('Y√ºkle: Kodu karta g√∂nderir.')"></div>
                    <div class="hotspot" style="top:5%; right:5%;" title="Seri Port" onmouseover="UI.showInfo('Seri Port Ekranƒ±: Mesajlarƒ± okur.')"></div>
                </div>`)},showInfo:e=>UI.showInfo(e),openImageModal:(e,t)=>UI.openImageModal(e,t),closeImageModal:()=>UI.closeImageModal(),setupCustomHotspots:e=>UI.setupCustomHotspots(e),showHotspotInfo:(e,t)=>UI.showInfo(t,e),hideHotspotInfo:()=>UI.showInfo("Numaralƒ± noktalarƒ±n √ºzerine gelerek a√ßƒ±klamalarƒ± g√∂r√ºn.","üîç Ke≈üfet"),getPracticalTip:e=>{const t=window.tipsData||{};if(!t.General)return{title:"ƒ∞pucu",text:"Bol bol pratik yap!",icon:"‚ú®"};let r=null;if(e.materials)for(const i of e.materials){for(const o in t)if(o!=="General"&&i.includes(o)){r=t[o];break}if(r)break}if(!r){const i=t.General,o=e.id%i.length;r=i[o]}return r},checkAnswer:(e,t,r,i)=>{const o=document.getElementById(`q-${e}`),a=o.querySelector(".quiz-feedback"),n=o.querySelectorAll("button");n.forEach(s=>{s.onclick=null,s.classList.add("cursor-default","opacity-70"),s.classList.remove("hover:bg-gray-100")}),a.classList.remove("hidden","bg-red-100","text-red-700","bg-green-100","text-green-700"),t===r?(i.classList.add("bg-green-100","border-green-300"),i.querySelector("span").classList.add("bg-green-500","text-white","border-green-500"),a.innerHTML="üéâ Doƒüru Cevap! Harikasƒ±n.",a.classList.add("bg-green-100","text-green-700")):(i.classList.add("bg-red-100","border-red-300"),i.querySelector("span").classList.add("bg-red-500","text-white","border-red-500"),n[r].classList.add("ring-2","ring-green-400","bg-green-50"),a.innerHTML="üòî Yanlƒ±≈ü Cevap. Doƒüru cevap i≈üaretlendi.",a.classList.add("bg-red-100","text-red-700"))},renderTabs:e=>{UI.renderTabs(e,app$1.state.componentInfo,app$1.state.currentCourseKey,app$1.progress)},setupSimulation:e=>{if(window.SimController?.setup)return window.SimController.setProject(app$1.currentProject),window.SimController.setup(e);console.warn("[App] SimController not loaded, using fallback");const t=document.getElementById("simCanvas");t&&(t.width=500,t.height=350,window.Simulations?.[e]?.setup&&window.Simulations[e].setup(app$1))},runSimLoop:(e,t)=>{if(window.SimController?._runLoop)return window.SimController._runLoop(e,t)},setControls:e=>{if(window.SimController?.setControls)return window.SimController.setControls(e);const t=document.getElementById("simControls");t&&(t.innerHTML=e)},toggleSidebar:()=>UI.toggleSidebar(),renderSidebar:()=>{const{phases:e,projects:t}=app$1.state,r=app$1.currentProject?app$1.currentProject.id:null;UI.renderSidebar(e,t,r)}};window.app=app$1;document.readyState==="loading"?document.addEventListener("DOMContentLoaded",app$1.init):app$1.init();window.addEventListener("load",()=>{requestAnimationFrame(()=>{document.body.classList.remove("preload");const e=document.getElementById("lesson-sidebar");e&&e.classList.remove("invisible"),window.UI?.initSidebarLinks&&UI.initSidebarLinks(),console.log("üöÄ App Loaded: Transitions enabled, sidebar ready")})});export{__vitePreload as _};
